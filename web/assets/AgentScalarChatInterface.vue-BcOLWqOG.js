import{d as P,o as c,c as g,r as he,u as d,a as v,b as I,m as ft,l as gt,s as bs,t as _s,e as K,f as h,_ as je,g as aa,h as ws,i as xs,n as Ss,j as Y,k as we,p as ke,q as D,v as w,w as le,x as As,y as Z,z as Is,A as z,B as Q,S as vt,C as ht,D as Es,E as Cs,F as sa,G as $s,R as Ts,H as Rs,U as ks,I as Os,J as ze,K as Ms,L as Ps,M as Ns,N as Ls,O as Ds,P as ne,Q as Be,T as O,V as Us,W as ra,X as Bs,Y as na,Z as Zs,$ as js,a0 as Oe,a1 as Vs,a2 as Hs,a3 as zs,a4 as qs,a5 as Fs,a6 as Js,a7 as Ws,a8 as Gs,a9 as Ys,aa as Xs,ab as Ks,ac as Qs,ad as er,ae as Se,af as tr,ag as x,ah as ar,ai as sr,aj as rr,ak as nr,al as J,am as j,an as $,ao as oa,ap as oe,aq as ia,ar as or,as as la,at as F,au as tt,av as Ee,aw as Ze,ax as ie,ay as ee,az as ca,aA as ir,aB as lr,aC as cr,aD as ua,aE as At,aF as da,aG as ur,aH as qe,aI as at,aJ as pa,aK as ma,aL as fa,aM as dr,aN as ga,aO as va,aP as pr,aQ as ha,aR as mr,aS as It,aT as fr,aU as Et,aV as gr,aW as Ie,aX as vr,aY as hr,aZ as yr,a_ as br,a$ as _r,b0 as wr,b1 as xr,b2 as Sr,b3 as Ar,b4 as Ir,b5 as Er}from"../scalar/scalar.js";const Cr={key:0},$r={key:1},Tr={key:2},Rr={key:3},kr={key:4},Or={key:5},Mr={name:"ScalarIconArrowRight"},Pr=P({...Mr,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=gt(t);return(n,r)=>(c(),g("svg",ft({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[he(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Cr,[...r[0]||(r[0]=[v("path",{d:"M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",$r,[...r[1]||(r[1]=[v("path",{d:"M216,128l-72,72V56Z",opacity:"0.2"},null,-1),v("path",{d:"M221.66,122.34l-72-72A8,8,0,0,0,136,56v64H40a8,8,0,0,0,0,16h96v64a8,8,0,0,0,13.66,5.66l72-72A8,8,0,0,0,221.66,122.34ZM152,180.69V75.31L204.69,128Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",Tr,[...r[2]||(r[2]=[v("path",{d:"M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Rr,[...r[3]||(r[3]=[v("path",{d:"M220.24,132.24l-72,72a6,6,0,0,1-8.48-8.48L201.51,134H40a6,6,0,0,1,0-12H201.51L139.76,60.24a6,6,0,0,1,8.48-8.48l72,72A6,6,0,0,1,220.24,132.24Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",kr,[...r[4]||(r[4]=[v("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",Or,[...r[5]||(r[5]=[v("path",{d:"M218.83,130.83l-72,72a4,4,0,0,1-5.66-5.66L206.34,132H40a4,4,0,0,1,0-8H206.34L141.17,58.83a4,4,0,0,1,5.66-5.66l72,72A4,4,0,0,1,218.83,130.83Z"},null,-1)])])):I("",!0)],16))}}),Nr={key:0},Lr={key:1},Dr={key:2},Ur={key:3},Br={key:4},Zr={key:5},jr={name:"ScalarIconUpload"},Vr=P({...jr,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=gt(t);return(n,r)=>(c(),g("svg",ft({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[he(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Nr,[...r[0]||(r[0]=[v("path",{d:"M188,184a16,16,0,1,1,16-16A16,16,0,0,1,188,184Zm36-68H180a12,12,0,0,0,0,24h40v56H36V140H76a12,12,0,0,0,0-24H32a20,20,0,0,0-20,20v64a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V136A20,20,0,0,0,224,116ZM88.49,80.49,116,53v75a12,12,0,0,0,24,0V53l27.51,27.52a12,12,0,1,0,17-17l-48-48a12,12,0,0,0-17,0l-48,48a12,12,0,1,0,17,17Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",Lr,[...r[1]||(r[1]=[v("path",{d:"M232,136v64a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V136a8,8,0,0,1,8-8H224A8,8,0,0,1,232,136Z",opacity:"0.2"},null,-1),v("path",{d:"M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",Dr,[...r[2]||(r[2]=[v("path",{d:"M74.34,77.66a8,8,0,0,1,0-11.32l48-48a8,8,0,0,1,11.32,0l48,48a8,8,0,0,1-11.32,11.32L136,43.31V128a8,8,0,0,1-16,0V43.31L85.66,77.66A8,8,0,0,1,74.34,77.66ZM240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16h68a4,4,0,0,1,4,4v3.46c0,13.45,11,24.79,24.46,24.54A24,24,0,0,0,152,128v-4a4,4,0,0,1,4-4h68A16,16,0,0,1,240,136Zm-40,32a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Ur,[...r[3]||(r[3]=[v("path",{d:"M238,136v64a14,14,0,0,1-14,14H32a14,14,0,0,1-14-14V136a14,14,0,0,1,14-14H80a6,6,0,0,1,0,12H32a2,2,0,0,0-2,2v64a2,2,0,0,0,2,2H224a2,2,0,0,0,2-2V136a2,2,0,0,0-2-2H176a6,6,0,0,1,0-12h48A14,14,0,0,1,238,136ZM84.24,76.24,122,38.49V128a6,6,0,0,0,12,0V38.49l37.76,37.75a6,6,0,0,0,8.48-8.48l-48-48a6,6,0,0,0-8.48,0l-48,48a6,6,0,0,0,8.48,8.48ZM198,168a10,10,0,1,0-10,10A10,10,0,0,0,198,168Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",Br,[...r[4]||(r[4]=[v("path",{d:"M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",Zr,[...r[5]||(r[5]=[v("path",{d:"M236,136v64a12,12,0,0,1-12,12H32a12,12,0,0,1-12-12V136a12,12,0,0,1,12-12H80a4,4,0,0,1,0,8H32a4,4,0,0,0-4,4v64a4,4,0,0,0,4,4H224a4,4,0,0,0,4-4V136a4,4,0,0,0-4-4H176a4,4,0,0,1,0-8h48A12,12,0,0,1,236,136ZM82.83,74.83,124,33.66V128a4,4,0,0,0,8,0V33.66l41.17,41.17a4,4,0,1,0,5.66-5.66l-48-48a4,4,0,0,0-5.66,0l-48,48a4,4,0,0,0,5.66,5.66ZM196,168a8,8,0,1,0-8,8A8,8,0,0,0,196,168Z"},null,-1)])])):I("",!0)],16))}}),Hr={key:0},zr={key:1},qr={key:2},Fr={key:3},Jr={key:4},Wr={key:5},Gr={name:"ScalarIconXCircle"},Yr=P({...Gr,props:{label:{},weight:{}},setup(e){const t=e,{bind:a,weight:s}=gt(t);return(n,r)=>(c(),g("svg",ft({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},d(a)),[he(n.$slots,"default"),d(s)==="bold"?(c(),g("g",Hr,[...r[0]||(r[0]=[v("path",{d:"M168.49,104.49,145,128l23.52,23.51a12,12,0,0,1-17,17L128,145l-23.51,23.52a12,12,0,0,1-17-17L111,128,87.51,104.49a12,12,0,0,1,17-17L128,111l23.51-23.52a12,12,0,0,1,17,17ZM236,128A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Z"},null,-1)])])):d(s)==="duotone"?(c(),g("g",zr,[...r[1]||(r[1]=[v("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"},null,-1),v("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1)])])):d(s)==="fill"?(c(),g("g",qr,[...r[2]||(r[2]=[v("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm37.66,130.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},null,-1)])])):d(s)==="light"?(c(),g("g",Fr,[...r[3]||(r[3]=[v("path",{d:"M164.24,100.24,136.48,128l27.76,27.76a6,6,0,1,1-8.48,8.48L128,136.48l-27.76,27.76a6,6,0,0,1-8.48-8.48L119.52,128,91.76,100.24a6,6,0,0,1,8.48-8.48L128,119.52l27.76-27.76a6,6,0,0,1,8.48,8.48ZM230,128A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"},null,-1)])])):d(s)==="regular"?(c(),g("g",Jr,[...r[4]||(r[4]=[v("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"},null,-1)])])):d(s)==="thin"?(c(),g("g",Wr,[...r[5]||(r[5]=[v("path",{d:"M162.83,98.83,133.66,128l29.17,29.17a4,4,0,0,1-5.66,5.66L128,133.66,98.83,162.83a4,4,0,0,1-5.66-5.66L122.34,128,93.17,98.83a4,4,0,0,1,5.66-5.66L128,122.34l29.17-29.17a4,4,0,1,1,5.66,5.66ZM228,128A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"},null,-1)])])):I("",!0)],16))}});var ya="vercel.ai.error",Xr=Symbol.for(ya),Ct,$t,pe=class ba extends($t=Error,Ct=Xr,$t){constructor({name:t,message:a,cause:s}){super(a),this[Ct]=!0,this.name=t,this.cause=s}static isInstance(t){return ba.hasMarker(t,ya)}static hasMarker(t,a){const s=Symbol.for(a);return t!=null&&typeof t=="object"&&s in t&&typeof t[s]=="boolean"&&t[s]===!0}};function _a(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var wa="AI_InvalidArgumentError",xa=`vercel.ai.error.${wa}`,Kr=Symbol.for(xa),Tt,Rt,Qr=class extends(Rt=pe,Tt=Kr,Rt){constructor({message:e,cause:t,argument:a}){super({name:wa,message:e,cause:t}),this[Tt]=!0,this.argument=a}static isInstance(e){return pe.hasMarker(e,xa)}},Sa="AI_JSONParseError",Aa=`vercel.ai.error.${Sa}`,en=Symbol.for(Aa),kt,Ot,Mt=class extends(Ot=pe,kt=en,Ot){constructor({text:e,cause:t}){super({name:Sa,message:`JSON parsing failed: Text: ${e}.
Error message: ${_a(t)}`,cause:t}),this[kt]=!0,this.text=e}static isInstance(e){return pe.hasMarker(e,Aa)}},Ia="AI_TypeValidationError",Ea=`vercel.ai.error.${Ia}`,tn=Symbol.for(Ea),Pt,Nt,xe=class st extends(Nt=pe,Pt=tn,Nt){constructor({value:t,cause:a}){super({name:Ia,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${_a(a)}`,cause:a}),this[Pt]=!0,this.value=t}static isInstance(t){return pe.hasMarker(t,Ea)}static wrap({value:t,cause:a}){return st.isInstance(a)&&a.value===t?a:new st({value:t,cause:a})}},Ce;(function(e){e.assertEqual=n=>{};function t(n){}e.assertIs=t;function a(n){throw new Error}e.assertNever=a,e.arrayToEnum=n=>{const r={};for(const i of n)r[i]=i;return r},e.getValidEnumValues=n=>{const r=e.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),i={};for(const o of r)i[o]=n[o];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(r){return n[r]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const r=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.push(i);return r},e.find=(n,r)=>{for(const i of n)if(r(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&Number.isFinite(n)&&Math.floor(n)===n;function s(n,r=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(r)}e.joinValues=s,e.jsonStringifyReplacer=(n,r)=>typeof r=="bigint"?r.toString():r})(Ce||(Ce={}));var Lt;(function(e){e.mergeShapes=(t,a)=>({...t,...a})})(Lt||(Lt={}));Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ve extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=t}format(t){const a=t||function(r){return r.message},s={_errors:[]},n=r=>{for(const i of r.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)s._errors.push(a(i));else{let o=s,u=0;for(;u<i.path.length;){const l=i.path[u];u===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(a(i))):o[l]=o[l]||{_errors:[]},o=o[l],u++}}};return n(this),s}static assert(t){if(!(t instanceof Ve))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=a=>a.message){const a=Object.create(null),s=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];a[r]=a[r]||[],a[r].push(t(n))}else s.push(t(n));return{formErrors:s,fieldErrors:a}}get formErrors(){return this.flatten()}}Ve.create=e=>new Ve(e);var Dt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Dt||(Dt={}));var C;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(C||(C={}));class Ut extends Error{constructor(t,a){super(t),this.name="ParseError",this.type=a.type,this.field=a.field,this.value=a.value,this.line=a.line}}function Ye(e){}function an(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Ye,onError:a=Ye,onRetry:s=Ye,onComment:n}=e;let r="",i=!0,o,u="",l="";function p(_){const S=i?_.replace(/^\xEF\xBB\xBF/,""):_,[R,L]=sn(`${r}${S}`);for(const m of R)f(m);r=L,i=!1}function f(_){if(_===""){b();return}if(_.startsWith(":")){n&&n(_.slice(_.startsWith(": ")?2:1));return}const S=_.indexOf(":");if(S!==-1){const R=_.slice(0,S),L=_[S+1]===" "?2:1,m=_.slice(S+L);y(R,m,_);return}y(_,"",_)}function y(_,S,R){switch(_){case"event":l=S;break;case"data":u=`${u}${S}
`;break;case"id":o=S.includes("\0")?void 0:S;break;case"retry":/^\d+$/.test(S)?s(parseInt(S,10)):a(new Ut(`Invalid \`retry\` value: "${S}"`,{type:"invalid-retry",value:S,line:R}));break;default:a(new Ut(`Unknown field "${_.length>20?`${_.slice(0,20)}â€¦`:_}"`,{type:"unknown-field",field:_,value:S,line:R}));break}}function b(){u.length>0&&t({id:o,event:l||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),o=void 0,u="",l=""}function T(_={}){r&&_.consume&&f(r),i=!0,o=void 0,u="",l="",r=""}return{feed:p,reset:T}}function sn(e){const t=[];let a="",s=0;for(;s<e.length;){const n=e.indexOf("\r",s),r=e.indexOf(`
`,s);let i=-1;if(n!==-1&&r!==-1?i=Math.min(n,r):n!==-1?n===e.length-1?i=-1:i=n:r!==-1&&(i=r),i===-1){a=e.slice(s);break}else{const o=e.slice(s,i);t.push(o),s=i+1,e[s-1]==="\r"&&e[s]===`
`&&s++}}return[t,a]}class rn extends TransformStream{constructor({onError:t,onRetry:a,onComment:s}={}){let n;super({start(r){n=an({onEvent:i=>{r.enqueue(i)},onError(i){t==="terminate"?r.error(i):typeof t=="function"&&t(i)},onRetry:a,onComment:s})},transform(r){n.feed(r)}})}}var Me=({prefix:e,size:t=16,alphabet:a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:s="-"}={})=>{const n=()=>{const r=a.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=a[Math.random()*r|0];return i.join("")};if(e==null)return n;if(a.includes(s))throw new Qr({argument:"separator",message:`The separator "${s}" must not be part of the alphabet "${a}".`});return()=>`${e}${s}${n()}`},nn=Me();function Bt(e=globalThis){var t,a,s;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(s=(a=e.process)==null?void 0:a.versions)!=null&&s.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function fe(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((a,s)=>{t[s.toLowerCase()]=a});else{Array.isArray(e)||(e=Object.entries(e));for(const[a,s]of e)s!=null&&(t[a.toLowerCase()]=s)}return t}function Zt(e,...t){const a=new Headers(fe(e)),s=a.get("user-agent")||"";return a.set("user-agent",[s,...t].filter(Boolean).join(" ")),Object.fromEntries(a.entries())}var on=/"__proto__"\s*:/,ln=/"constructor"\s*:/;function jt(e){const t=JSON.parse(e);return t===null||typeof t!="object"||on.test(e)===!1&&ln.test(e)===!1?t:cn(t)}function cn(e){let t=[e];for(;t.length;){const a=t;t=[];for(const s of a){if(Object.prototype.hasOwnProperty.call(s,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(s,"constructor")&&Object.prototype.hasOwnProperty.call(s.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const n in s){const r=s[n];r&&typeof r=="object"&&t.push(r)}}}return e}function un(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return jt(e)}try{return jt(e)}finally{Error.stackTraceLimit=t}}function yt(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:a}=e;if(a!=null)for(const s of Object.keys(a))a[s]=me(a[s])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(me):me(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(me)),e.allOf!=null&&(e.allOf=e.allOf.map(me)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(me));const{definitions:t}=e;if(t!=null)for(const a of Object.keys(t))t[a]=me(t[a]);return e}function me(e){return typeof e=="boolean"?e:yt(e)}var dn=Symbol("Let zodToJsonSchema decide on which parser to use"),Vt={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},pn=e=>typeof e=="string"?{...Vt,name:e}:{...Vt,...e};function te(){return{}}function mn(e,t){var a,s,n;const r={type:"array"};return(a=e.type)!=null&&a._def&&((n=(s=e.type)==null?void 0:s._def)==null?void 0:n.typeName)!==C.ZodAny&&(r.items=B(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(r.minItems=e.minLength.value),e.maxLength&&(r.maxItems=e.maxLength.value),e.exactLength&&(r.minItems=e.exactLength.value,r.maxItems=e.exactLength.value),r}function fn(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value;break}return t}function gn(){return{type:"boolean"}}function Ca(e,t){return B(e.type._def,t)}var vn=(e,t)=>B(e.innerType._def,t);function $a(e,t,a){const s=a??t.dateStrategy;if(Array.isArray(s))return{anyOf:s.map((n,r)=>$a(e,t,n))};switch(s){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return hn(e)}}var hn=e=>{const t={type:"integer",format:"unix-time"};for(const a of e.checks)switch(a.kind){case"min":t.minimum=a.value;break;case"max":t.maximum=a.value;break}return t};function yn(e,t){return{...B(e.innerType._def,t),default:e.defaultValue()}}function bn(e,t){return t.effectStrategy==="input"?B(e.schema._def,t):te()}function _n(e){return{type:"string",enum:Array.from(e.values)}}var wn=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function xn(e,t){const a=[B(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),B(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(n=>!!n),s=[];return a.forEach(n=>{if(wn(n))s.push(...n.allOf);else{let r=n;if("additionalProperties"in n&&n.additionalProperties===!1){const{additionalProperties:i,...o}=n;r=o}s.push(r)}}),s.length?{allOf:s}:void 0}function Sn(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var Xe=void 0,ae={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Xe===void 0&&(Xe=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Xe),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ta(e,t){const a={type:"string"};if(e.checks)for(const s of e.checks)switch(s.kind){case"min":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,s.value):s.value;break;case"max":a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,s.value):s.value;break;case"email":switch(t.emailStrategy){case"format:email":se(a,"email",s.message,t);break;case"format:idn-email":se(a,"idn-email",s.message,t);break;case"pattern:zod":G(a,ae.email,s.message,t);break}break;case"url":se(a,"uri",s.message,t);break;case"uuid":se(a,"uuid",s.message,t);break;case"regex":G(a,s.regex,s.message,t);break;case"cuid":G(a,ae.cuid,s.message,t);break;case"cuid2":G(a,ae.cuid2,s.message,t);break;case"startsWith":G(a,RegExp(`^${Ke(s.value,t)}`),s.message,t);break;case"endsWith":G(a,RegExp(`${Ke(s.value,t)}$`),s.message,t);break;case"datetime":se(a,"date-time",s.message,t);break;case"date":se(a,"date",s.message,t);break;case"time":se(a,"time",s.message,t);break;case"duration":se(a,"duration",s.message,t);break;case"length":a.minLength=typeof a.minLength=="number"?Math.max(a.minLength,s.value):s.value,a.maxLength=typeof a.maxLength=="number"?Math.min(a.maxLength,s.value):s.value;break;case"includes":{G(a,RegExp(Ke(s.value,t)),s.message,t);break}case"ip":{s.version!=="v6"&&se(a,"ipv4",s.message,t),s.version!=="v4"&&se(a,"ipv6",s.message,t);break}case"base64url":G(a,ae.base64url,s.message,t);break;case"jwt":G(a,ae.jwt,s.message,t);break;case"cidr":{s.version!=="v6"&&G(a,ae.ipv4Cidr,s.message,t),s.version!=="v4"&&G(a,ae.ipv6Cidr,s.message,t);break}case"emoji":G(a,ae.emoji(),s.message,t);break;case"ulid":{G(a,ae.ulid,s.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{se(a,"binary",s.message,t);break}case"contentEncoding:base64":{a.contentEncoding="base64";break}case"pattern:zod":{G(a,ae.base64,s.message,t);break}}break}case"nanoid":G(a,ae.nanoid,s.message,t)}return a}function Ke(e,t){return t.patternStrategy==="escape"?In(e):e}var An=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function In(e){let t="";for(let a=0;a<e.length;a++)An.has(e[a])||(t+="\\"),t+=e[a];return t}function se(e,t,a,s){var n;e.format||(n=e.anyOf)!=null&&n.some(r=>r.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...a&&s.errorMessages&&{errorMessage:{format:a}}})):e.format=t}function G(e,t,a,s){var n;e.pattern||(n=e.allOf)!=null&&n.some(r=>r.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:Ht(t,s),...a&&s.errorMessages&&{errorMessage:{pattern:a}}})):e.pattern=Ht(t,s)}function Ht(e,t){var a;if(!t.applyRegexFlags||!e.flags)return e.source;const s={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},n=s.i?e.source.toLowerCase():e.source;let r="",i=!1,o=!1,u=!1;for(let l=0;l<n.length;l++){if(i){r+=n[l],i=!1;continue}if(s.i){if(o){if(n[l].match(/[a-z]/)){u?(r+=n[l],r+=`${n[l-2]}-${n[l]}`.toUpperCase(),u=!1):n[l+1]==="-"&&((a=n[l+2])!=null&&a.match(/[a-z]/))?(r+=n[l],u=!0):r+=`${n[l]}${n[l].toUpperCase()}`;continue}}else if(n[l].match(/[a-z]/)){r+=`[${n[l]}${n[l].toUpperCase()}]`;continue}}if(s.m){if(n[l]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(n[l]==="$"){r+=`($|(?=[\r
]))`;continue}}if(s.s&&n[l]==="."){r+=o?`${n[l]}\r
`:`[${n[l]}\r
]`;continue}r+=n[l],n[l]==="\\"?i=!0:o&&n[l]==="]"?o=!1:!o&&n[l]==="["&&(o=!0)}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return r}function Ra(e,t){var a,s,n,r,i,o;const u={type:"object",additionalProperties:(a=B(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?a:t.allowedAdditionalProperties};if(((s=e.keyType)==null?void 0:s._def.typeName)===C.ZodString&&((n=e.keyType._def.checks)!=null&&n.length)){const{type:l,...p}=Ta(e.keyType._def,t);return{...u,propertyNames:p}}else{if(((r=e.keyType)==null?void 0:r._def.typeName)===C.ZodEnum)return{...u,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===C.ZodBranded&&e.keyType._def.type._def.typeName===C.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:l,...p}=Ca(e.keyType._def,t);return{...u,propertyNames:p}}}return u}function En(e,t){if(t.mapStrategy==="record")return Ra(e,t);const a=B(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||te(),s=B(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||te();return{type:"array",maxItems:125,items:{type:"array",items:[a,s],minItems:2,maxItems:2}}}function Cn(e){const t=e.values,s=Object.keys(e.values).filter(r=>typeof t[t[r]]!="number").map(r=>t[r]),n=Array.from(new Set(s.map(r=>typeof r)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:s}}function $n(){return{not:te()}}function Tn(){return{type:"null"}}var rt={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Rn(e,t){const a=e.options instanceof Map?Array.from(e.options.values()):e.options;if(a.every(s=>s._def.typeName in rt&&(!s._def.checks||!s._def.checks.length))){const s=a.reduce((n,r)=>{const i=rt[r._def.typeName];return i&&!n.includes(i)?[...n,i]:n},[]);return{type:s.length>1?s:s[0]}}else if(a.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){const s=a.reduce((n,r)=>{const i=typeof r._def.value;switch(i){case"string":case"number":case"boolean":return[...n,i];case"bigint":return[...n,"integer"];case"object":if(r._def.value===null)return[...n,"null"];default:return n}},[]);if(s.length===a.length){const n=s.filter((r,i,o)=>o.indexOf(r)===i);return{type:n.length>1?n:n[0],enum:a.reduce((r,i)=>r.includes(i._def.value)?r:[...r,i._def.value],[])}}}else if(a.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:a.reduce((s,n)=>[...s,...n._def.values.filter(r=>!s.includes(r))],[])};return kn(e,t)}var kn=(e,t)=>{const a=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((s,n)=>B(s._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(s=>!!s&&(!t.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return a.length?{anyOf:a}:void 0};function On(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[rt[e.innerType._def.typeName],"null"]};const a=B(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return a&&{anyOf:[a,{type:"null"}]}}function Mn(e){const t={type:"number"};if(!e.checks)return t;for(const a of e.checks)switch(a.kind){case"int":t.type="integer";break;case"min":a.inclusive?t.minimum=a.value:t.exclusiveMinimum=a.value;break;case"max":a.inclusive?t.maximum=a.value:t.exclusiveMaximum=a.value;break;case"multipleOf":t.multipleOf=a.value;break}return t}function Pn(e,t){const a={type:"object",properties:{}},s=[],n=e.shape();for(const i in n){let o=n[i];if(o===void 0||o._def===void 0)continue;const u=Ln(o),l=B(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});l!==void 0&&(a.properties[i]=l,u||s.push(i))}s.length&&(a.required=s);const r=Nn(e,t);return r!==void 0&&(a.additionalProperties=r),a}function Nn(e,t){if(e.catchall._def.typeName!=="ZodNever")return B(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Ln(e){try{return e.isOptional()}catch{return!0}}var Dn=(e,t)=>{var a;if(t.currentPath.toString()===((a=t.propertyPath)==null?void 0:a.toString()))return B(e.innerType._def,t);const s=B(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return s?{anyOf:[{not:te()},s]}:te()},Un=(e,t)=>{if(t.pipeStrategy==="input")return B(e.in._def,t);if(t.pipeStrategy==="output")return B(e.out._def,t);const a=B(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),s=B(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",a?"1":"0"]});return{allOf:[a,s].filter(n=>n!==void 0)}};function Bn(e,t){return B(e.type._def,t)}function Zn(e,t){const s={type:"array",uniqueItems:!0,items:B(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(s.minItems=e.minSize.value),e.maxSize&&(s.maxItems=e.maxSize.value),s}function jn(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((a,s)=>B(a._def,{...t,currentPath:[...t.currentPath,"items",`${s}`]})).reduce((a,s)=>s===void 0?a:[...a,s],[]),additionalItems:B(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((a,s)=>B(a._def,{...t,currentPath:[...t.currentPath,"items",`${s}`]})).reduce((a,s)=>s===void 0?a:[...a,s],[])}}function Vn(){return{not:te()}}function Hn(){return te()}var zn=(e,t)=>B(e.innerType._def,t),qn=(e,t,a)=>{switch(t){case C.ZodString:return Ta(e,a);case C.ZodNumber:return Mn(e);case C.ZodObject:return Pn(e,a);case C.ZodBigInt:return fn(e);case C.ZodBoolean:return gn();case C.ZodDate:return $a(e,a);case C.ZodUndefined:return Vn();case C.ZodNull:return Tn();case C.ZodArray:return mn(e,a);case C.ZodUnion:case C.ZodDiscriminatedUnion:return Rn(e,a);case C.ZodIntersection:return xn(e,a);case C.ZodTuple:return jn(e,a);case C.ZodRecord:return Ra(e,a);case C.ZodLiteral:return Sn(e);case C.ZodEnum:return _n(e);case C.ZodNativeEnum:return Cn(e);case C.ZodNullable:return On(e,a);case C.ZodOptional:return Dn(e,a);case C.ZodMap:return En(e,a);case C.ZodSet:return Zn(e,a);case C.ZodLazy:return()=>e.getter()._def;case C.ZodPromise:return Bn(e,a);case C.ZodNaN:case C.ZodNever:return $n();case C.ZodEffects:return bn(e,a);case C.ZodAny:return te();case C.ZodUnknown:return Hn();case C.ZodDefault:return yn(e,a);case C.ZodBranded:return Ca(e,a);case C.ZodReadonly:return zn(e,a);case C.ZodCatch:return vn(e,a);case C.ZodPipeline:return Un(e,a);case C.ZodFunction:case C.ZodVoid:case C.ZodSymbol:return;default:return(s=>{})()}},Fn=(e,t)=>{let a=0;for(;a<e.length&&a<t.length&&e[a]===t[a];a++);return[(e.length-a).toString(),...t.slice(a)].join("/")};function B(e,t,a=!1){var s;const n=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,n,a);if(u!==dn)return u}if(n&&!a){const u=Jn(n,t);if(u!==void 0)return u}const r={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,r);const i=qn(e,e.typeName,t),o=typeof i=="function"?B(i(),t):i;if(o&&Wn(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return r.jsonSchema=o,u}return r.jsonSchema=o,o}var Jn=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Fn(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((a,s)=>t.currentPath[s]===a)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),te()):t.$refStrategy==="seen"?te():void 0}},Wn=(e,t,a)=>(e.description&&(a.description=e.description),a),Gn=e=>{const t=pn(e),a=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:a,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([s,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,s],jsonSchema:void 0}]))}},Yn=(e,t)=>{var a;const s=Gn(t);let n=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[p,f])=>{var y;return{...l,[p]:(y=B(f._def,{...s,currentPath:[...s.basePath,s.definitionPath,p]},!0))!=null?y:te()}},{}):void 0;const r=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(a=B(e._def,r===void 0?s:{...s,currentPath:[...s.basePath,s.definitionPath,r]},!1))!=null?a:te(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const u=r===void 0?n?{...i,[s.definitionPath]:n}:i:{$ref:[...s.$refStrategy==="relative"?[]:s.basePath,s.definitionPath,r].join("/"),[s.definitionPath]:{...n,[r]:i}};return u.$schema="http://json-schema.org/draft-07/schema#",u},nt=Symbol.for("vercel.ai.schema");function Xn(e){let t;return()=>(t==null&&(t=e()),t)}function Fe(e,{validate:t}={}){return{[nt]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Kn(e){return typeof e=="object"&&e!==null&&nt in e&&e[nt]===!0&&"jsonSchema"in e&&"validate"in e}function bt(e){return e==null?Fe({properties:{},additionalProperties:!1}):Kn(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?ka(e):Qn(e):e()}function Qn(e){return Fe(()=>yt(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const a=await e["~standard"].validate(t);return"value"in a?{success:!0,value:a.value}:{success:!1,error:new xe({value:t,cause:a.issues})}}})}function eo(e,t){var a;const s=(a=void 0)!=null?a:!1;return Fe(()=>Yn(e,{$refStrategy:s?"root":"none"}),{validate:async n=>{const r=await e.safeParseAsync(n);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function to(e,t){var a;const s=(a=void 0)!=null?a:!1;return Fe(()=>yt(_s(e,{target:"draft-7",io:"input",reused:s?"ref":"inline"})),{validate:async n=>{const r=await bs(e,n);return r.success?{success:!0,value:r.data}:{success:!1,error:r.error}}})}function ao(e){return"_zod"in e}function ka(e,t){return ao(e)?to(e):eo(e)}async function zt({value:e,schema:t}){const a=await $e({value:e,schema:t});if(!a.success)throw xe.wrap({value:e,cause:a.error});return a.value}async function $e({value:e,schema:t}){const a=bt(t);try{if(a.validate==null)return{success:!0,value:e,rawValue:e};const s=await a.validate(e);return s.success?{success:!0,value:s.value,rawValue:e}:{success:!1,error:xe.wrap({value:e,cause:s.error}),rawValue:e}}catch(s){return{success:!1,error:xe.wrap({value:e,cause:s}),rawValue:e}}}async function ve({text:e,schema:t}){try{const a=un(e);return t==null?{success:!0,value:a,rawValue:a}:await $e({value:a,schema:t})}catch(a){return{success:!1,error:Mt.isInstance(a)?a:new Mt({text:e,cause:a}),rawValue:void 0}}}function so({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new rn).pipeThrough(new TransformStream({async transform({data:a},s){a!=="[DONE]"&&s.enqueue(await ve({text:a,schema:t}))}}))}async function ce(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ro=Object.defineProperty,no=(e,t)=>{for(var a in t)ro(e,a,{get:t[a],enumerable:!0})},Oa="AI_NoObjectGeneratedError",Ma=`vercel.ai.error.${Oa}`,oo=Symbol.for(Ma),Pa,ue=class extends pe{constructor({message:e="No object generated.",cause:t,text:a,response:s,usage:n,finishReason:r}){super({name:Oa,message:e,cause:t}),this[Pa]=!0,this.text=a,this.response=s,this.usage=n,this.finishReason=r}static isInstance(e){return pe.hasMarker(e,Ma)}};Pa=oo;var qt="6.0.33",Na=K([h(),je(Uint8Array),je(ArrayBuffer),aa(e=>{var t,a;return(a=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?a:!1},{message:"Must be a Buffer"})]),Te=ws(()=>K([xs(),h(),Ss(),Y(),we(h(),Te.optional()),ke(Te)])),M=we(h(),we(h(),Te.optional())),La=D({type:w("text"),text:h(),providerOptions:M.optional()}),io=D({type:w("image"),image:K([Na,je(URL)]),mediaType:h().optional(),providerOptions:M.optional()}),Da=D({type:w("file"),data:K([Na,je(URL)]),filename:h().optional(),mediaType:h(),providerOptions:M.optional()}),lo=D({type:w("reasoning"),text:h(),providerOptions:M.optional()}),co=D({type:w("tool-call"),toolCallId:h(),toolName:h(),input:le(),providerOptions:M.optional(),providerExecuted:Y().optional()}),uo=As("type",[D({type:w("text"),value:h(),providerOptions:M.optional()}),D({type:w("json"),value:Te,providerOptions:M.optional()}),D({type:w("execution-denied"),reason:h().optional(),providerOptions:M.optional()}),D({type:w("error-text"),value:h(),providerOptions:M.optional()}),D({type:w("error-json"),value:Te,providerOptions:M.optional()}),D({type:w("content"),value:ke(K([D({type:w("text"),text:h(),providerOptions:M.optional()}),D({type:w("media"),data:h(),mediaType:h()}),D({type:w("file-data"),data:h(),mediaType:h(),filename:h().optional(),providerOptions:M.optional()}),D({type:w("file-url"),url:h(),providerOptions:M.optional()}),D({type:w("file-id"),fileId:K([h(),we(h(),h())]),providerOptions:M.optional()}),D({type:w("image-data"),data:h(),mediaType:h(),providerOptions:M.optional()}),D({type:w("image-url"),url:h(),providerOptions:M.optional()}),D({type:w("image-file-id"),fileId:K([h(),we(h(),h())]),providerOptions:M.optional()}),D({type:w("custom"),providerOptions:M.optional()})]))})]),Ua=D({type:w("tool-result"),toolCallId:h(),toolName:h(),output:uo,providerOptions:M.optional()}),po=D({type:w("tool-approval-request"),approvalId:h(),toolCallId:h()}),mo=D({type:w("tool-approval-response"),approvalId:h(),approved:Y(),reason:h().optional()}),fo=D({role:w("system"),content:h(),providerOptions:M.optional()}),go=D({role:w("user"),content:K([h(),ke(K([La,io,Da]))]),providerOptions:M.optional()}),vo=D({role:w("assistant"),content:K([h(),ke(K([La,Da,lo,co,Ua,po]))]),providerOptions:M.optional()}),ho=D({role:w("tool"),content:ke(K([Ua,mo])),providerOptions:M.optional()});K([fo,go,vo,ho]);function Ba(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const a={...e};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];if(n===void 0)continue;const r=s in e?e[s]:void 0,i=n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&!(n instanceof RegExp),o=r!=null&&typeof r=="object"&&!Array.isArray(r)&&!(r instanceof Date)&&!(r instanceof RegExp);i&&o?a[s]=Ba(r,n):a[s]=n}return a}var yo={};no(yo,{array:()=>xo,choice:()=>So,json:()=>Ao,object:()=>wo,text:()=>_o});function bo(e){const t=["ROOT"];let a=-1,s=null;function n(u,l,p){switch(u){case'"':{a=l,t.pop(),t.push(p),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{a=l,s=l,t.pop(),t.push(p),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=l,t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"{":{a=l,t.pop(),t.push(p),t.push("INSIDE_OBJECT_START");break}case"[":{a=l,t.pop(),t.push(p),t.push("INSIDE_ARRAY_START");break}}}function r(u,l){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{a=l,t.pop();break}}}function i(u,l){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=l,t.pop();break}}}for(let u=0;u<e.length;u++){const l=e[u];switch(t[t.length-1]){case"ROOT":n(l,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(l){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{a=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{l==='"'&&(t.pop(),t.push("INSIDE_OBJECT_KEY"));break}case"INSIDE_OBJECT_KEY":{l==='"'&&(t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY"));break}case"INSIDE_OBJECT_AFTER_KEY":{l===":"&&(t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE"));break}case"INSIDE_OBJECT_BEFORE_VALUE":{n(l,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{r(l,u);break}case"INSIDE_STRING":{switch(l){case'"':{t.pop(),a=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:a=u}break}case"INSIDE_ARRAY_START":{l==="]"?(a=u,t.pop()):(a=u,n(l,u,"INSIDE_ARRAY_AFTER_VALUE"));break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{a=u,t.pop();break}default:{a=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{n(l,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),a=u;break}case"INSIDE_NUMBER":{switch(l){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{a=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(l,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&r(l,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const f=e.substring(s,u+1);!"false".startsWith(f)&&!"true".startsWith(f)&&!"null".startsWith(f)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?r(l,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(l,u)):a=u;break}}}let o=e.slice(0,a+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const p=e.substring(s,e.length);"true".startsWith(p)?o+="true".slice(p.length):"false".startsWith(p)?o+="false".slice(p.length):"null".startsWith(p)&&(o+="null".slice(p.length))}}return o}async function Pe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await ve({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await ve({text:bo(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var _o=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),wo=({schema:e,name:t,description:a})=>{const s=bt(e);return{name:"object",responseFormat:ce(s.jsonSchema).then(n=>({type:"json",schema:n,...t!=null&&{name:t},...a!=null&&{description:a}})),async parseCompleteOutput({text:n},r){const i=await ve({text:n});if(!i.success)throw new ue({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=await $e({value:i.value,schema:s});if(!o.success)throw new ue({message:"No object generated: response did not match schema.",cause:o.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return o.value},async parsePartialOutput({text:n}){const r=await Pe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value}}},createElementStreamTransform(){}}},xo=({element:e,name:t,description:a})=>{const s=bt(e);return{name:"array",responseFormat:ce(s.jsonSchema).then(n=>{const{$schema:r,...i}=n;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:i}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...a!=null&&{description:a}}}),async parseCompleteOutput({text:n},r){const i=await ve({text:n});if(!i.success)throw new ue({message:"No object generated: could not parse the response.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const o=i.value;if(o==null||typeof o!="object"||!("elements"in o)||!Array.isArray(o.elements))throw new ue({message:"No object generated: response did not match schema.",cause:new xe({value:o,cause:"response must be an object with an elements array"}),text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});for(const u of o.elements){const l=await $e({value:u,schema:s});if(!l.success)throw new ue({message:"No object generated: response did not match schema.",cause:l.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason})}return o.elements},async parsePartialOutput({text:n}){const r=await Pe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const i=r.value;if(i==null||typeof i!="object"||!("elements"in i)||!Array.isArray(i.elements))return;const o=r.state==="repaired-parse"&&i.elements.length>0?i.elements.slice(0,-1):i.elements,u=[];for(const l of o){const p=await $e({value:l,schema:s});p.success&&u.push(p.value)}return{partial:u}}}},createElementStreamTransform(){let n=0;return new TransformStream({transform({partialOutput:r},i){if(r!=null)for(;n<r.length;n++)i.enqueue(r[n])}})}}},So=({options:e,name:t,description:a})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...a!=null&&{description:a}}),async parseCompleteOutput({text:s},n){const r=await ve({text:s});if(!r.success)throw new ue({message:"No object generated: could not parse the response.",cause:r.error,text:s,response:n.response,usage:n.usage,finishReason:n.finishReason});const i=r.value;if(i==null||typeof i!="object"||!("result"in i)||typeof i.result!="string"||!e.includes(i.result))throw new ue({message:"No object generated: response did not match schema.",cause:new xe({value:i,cause:"response must be an object that contains a choice value."}),text:s,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.result},async parsePartialOutput({text:s}){const n=await Pe(s);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const r=n.value;if(r==null||typeof r!="object"||!("result"in r)||typeof r.result!="string")return;const i=e.filter(o=>o.startsWith(r.result));return n.state==="successful-parse"?i.includes(r.result)?{partial:r.result}:void 0:i.length===1?{partial:i[0]}:void 0}}},createElementStreamTransform(){}}),Ao=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:a},s){const n=await ve({text:a});if(!n.success)throw new ue({message:"No object generated: could not parse the response.",cause:n.error,text:a,response:s.response,usage:s.usage,finishReason:s.finishReason});return n.value},async parsePartialOutput({text:a}){const s=await Pe(a);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return s.value===void 0?void 0:{partial:s.value}}},createElementStreamTransform(){}});Me({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var Io=Xn(()=>ka(K([Z({type:w("text-start"),id:h(),providerMetadata:M.optional()}),Z({type:w("text-delta"),id:h(),delta:h(),providerMetadata:M.optional()}),Z({type:w("text-end"),id:h(),providerMetadata:M.optional()}),Z({type:w("error"),errorText:h()}),Z({type:w("tool-input-start"),toolCallId:h(),toolName:h(),providerExecuted:Y().optional(),dynamic:Y().optional(),title:h().optional()}),Z({type:w("tool-input-delta"),toolCallId:h(),inputTextDelta:h()}),Z({type:w("tool-input-available"),toolCallId:h(),toolName:h(),input:le(),providerExecuted:Y().optional(),providerMetadata:M.optional(),dynamic:Y().optional(),title:h().optional()}),Z({type:w("tool-input-error"),toolCallId:h(),toolName:h(),input:le(),providerExecuted:Y().optional(),providerMetadata:M.optional(),dynamic:Y().optional(),errorText:h(),title:h().optional()}),Z({type:w("tool-approval-request"),approvalId:h(),toolCallId:h()}),Z({type:w("tool-output-available"),toolCallId:h(),output:le(),providerExecuted:Y().optional(),dynamic:Y().optional(),preliminary:Y().optional()}),Z({type:w("tool-output-error"),toolCallId:h(),errorText:h(),providerExecuted:Y().optional(),dynamic:Y().optional()}),Z({type:w("tool-output-denied"),toolCallId:h()}),Z({type:w("reasoning-start"),id:h(),providerMetadata:M.optional()}),Z({type:w("reasoning-delta"),id:h(),delta:h(),providerMetadata:M.optional()}),Z({type:w("reasoning-end"),id:h(),providerMetadata:M.optional()}),Z({type:w("source-url"),sourceId:h(),url:h(),title:h().optional(),providerMetadata:M.optional()}),Z({type:w("source-document"),sourceId:h(),mediaType:h(),title:h(),filename:h().optional(),providerMetadata:M.optional()}),Z({type:w("file"),url:h(),mediaType:h(),providerMetadata:M.optional()}),Z({type:aa(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:h().optional(),data:le(),transient:Y().optional()}),Z({type:w("start-step")}),Z({type:w("finish-step")}),Z({type:w("start"),messageId:h().optional(),messageMetadata:le().optional()}),Z({type:w("finish"),finishReason:Is(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:le().optional()}),Z({type:w("abort"),reason:h().optional()}),Z({type:w("message-metadata"),messageMetadata:le()})])));function Eo(e){return e.type.startsWith("data-")}function ot(e){return e.type.startsWith("tool-")}function Co(e){return e.type==="dynamic-tool"}function He(e){return ot(e)||Co(e)}function Ft(e){return e.type.split("-").slice(1).join("-")}function $o({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function To({stream:e,messageMetadataSchema:t,dataPartSchemas:a,runUpdateMessageJob:s,onError:n,onToolCall:r,onData:i}){return e.pipeThrough(new TransformStream({async transform(o,u){await s(async({state:l,write:p})=>{var f,y,b,T;function _(m){const E=l.message.parts.filter(He).find(A=>A.toolCallId===m);if(E==null)throw new Error(`no tool invocation found for tool call ${m}`);return E}function S(m){var k;const E=l.message.parts.find(q=>ot(q)&&q.toolCallId===m.toolCallId),A=m,U=E;E!=null?(E.state=m.state,U.input=A.input,U.output=A.output,U.errorText=A.errorText,U.rawInput=A.rawInput,U.preliminary=A.preliminary,m.title!==void 0&&(U.title=m.title),U.providerExecuted=(k=A.providerExecuted)!=null?k:E.providerExecuted,A.providerMetadata!=null&&E.state==="input-available"&&(E.callProviderMetadata=A.providerMetadata)):l.message.parts.push({type:`tool-${m.toolName}`,toolCallId:m.toolCallId,state:m.state,title:m.title,input:A.input,output:A.output,rawInput:A.rawInput,errorText:A.errorText,providerExecuted:A.providerExecuted,preliminary:A.preliminary,...A.providerMetadata!=null?{callProviderMetadata:A.providerMetadata}:{}})}function R(m){var k,E;const A=l.message.parts.find(ye=>ye.type==="dynamic-tool"&&ye.toolCallId===m.toolCallId),U=m,q=A;A!=null?(A.state=m.state,q.toolName=m.toolName,q.input=U.input,q.output=U.output,q.errorText=U.errorText,q.rawInput=(k=U.rawInput)!=null?k:q.rawInput,q.preliminary=U.preliminary,m.title!==void 0&&(q.title=m.title),q.providerExecuted=(E=U.providerExecuted)!=null?E:A.providerExecuted,U.providerMetadata!=null&&A.state==="input-available"&&(A.callProviderMetadata=U.providerMetadata)):l.message.parts.push({type:"dynamic-tool",toolName:m.toolName,toolCallId:m.toolCallId,state:m.state,input:U.input,output:U.output,errorText:U.errorText,preliminary:U.preliminary,providerExecuted:U.providerExecuted,title:m.title,...U.providerMetadata!=null?{callProviderMetadata:U.providerMetadata}:{}})}async function L(m){if(m!=null){const k=l.message.metadata!=null?Ba(l.message.metadata,m):m;t!=null&&await zt({value:k,schema:t}),l.message.metadata=k}}switch(o.type){case"text-start":{const m={type:"text",text:"",providerMetadata:o.providerMetadata,state:"streaming"};l.activeTextParts[o.id]=m,l.message.parts.push(m),p();break}case"text-delta":{const m=l.activeTextParts[o.id];m.text+=o.delta,m.providerMetadata=(f=o.providerMetadata)!=null?f:m.providerMetadata,p();break}case"text-end":{const m=l.activeTextParts[o.id];m.state="done",m.providerMetadata=(y=o.providerMetadata)!=null?y:m.providerMetadata,delete l.activeTextParts[o.id],p();break}case"reasoning-start":{const m={type:"reasoning",text:"",providerMetadata:o.providerMetadata,state:"streaming"};l.activeReasoningParts[o.id]=m,l.message.parts.push(m),p();break}case"reasoning-delta":{const m=l.activeReasoningParts[o.id];m.text+=o.delta,m.providerMetadata=(b=o.providerMetadata)!=null?b:m.providerMetadata,p();break}case"reasoning-end":{const m=l.activeReasoningParts[o.id];m.providerMetadata=(T=o.providerMetadata)!=null?T:m.providerMetadata,m.state="done",delete l.activeReasoningParts[o.id],p();break}case"file":{l.message.parts.push({type:"file",mediaType:o.mediaType,url:o.url}),p();break}case"source-url":{l.message.parts.push({type:"source-url",sourceId:o.sourceId,url:o.url,title:o.title,providerMetadata:o.providerMetadata}),p();break}case"source-document":{l.message.parts.push({type:"source-document",sourceId:o.sourceId,mediaType:o.mediaType,title:o.title,filename:o.filename,providerMetadata:o.providerMetadata}),p();break}case"tool-input-start":{const m=l.message.parts.filter(ot);l.partialToolCalls[o.toolCallId]={text:"",toolName:o.toolName,index:m.length,dynamic:o.dynamic,title:o.title},o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted,title:o.title}),p();break}case"tool-input-delta":{const m=l.partialToolCalls[o.toolCallId];m.text+=o.inputTextDelta;const{value:k}=await Pe(m.text);m.dynamic?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"input-streaming",input:k,title:m.title}):S({toolCallId:o.toolCallId,toolName:m.toolName,state:"input-streaming",input:k,title:m.title}),p();break}case"tool-input-available":{o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata,title:o.title}),p(),r&&!o.providerExecuted&&await r({toolCall:o});break}case"tool-input-error":{o.dynamic?R({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}):S({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:void 0,rawInput:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}),p();break}case"tool-approval-request":{const m=_(o.toolCallId);m.state="approval-requested",m.approval={id:o.approvalId},p();break}case"tool-output-denied":{const m=_(o.toolCallId);m.state="output-denied",p();break}case"tool-output-available":{const m=_(o.toolCallId);m.type==="dynamic-tool"?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"output-available",input:m.input,output:o.output,preliminary:o.preliminary,providerExecuted:o.providerExecuted,title:m.title}):S({toolCallId:o.toolCallId,toolName:Ft(m),state:"output-available",input:m.input,output:o.output,providerExecuted:o.providerExecuted,preliminary:o.preliminary,title:m.title}),p();break}case"tool-output-error":{const m=_(o.toolCallId);m.type==="dynamic-tool"?R({toolCallId:o.toolCallId,toolName:m.toolName,state:"output-error",input:m.input,errorText:o.errorText,providerExecuted:o.providerExecuted,title:m.title}):S({toolCallId:o.toolCallId,toolName:Ft(m),state:"output-error",input:m.input,rawInput:m.rawInput,errorText:o.errorText,providerExecuted:o.providerExecuted,title:m.title}),p();break}case"start-step":{l.message.parts.push({type:"step-start"});break}case"finish-step":{l.activeTextParts={},l.activeReasoningParts={};break}case"start":{o.messageId!=null&&(l.message.id=o.messageId),await L(o.messageMetadata),(o.messageId!=null||o.messageMetadata!=null)&&p();break}case"finish":{o.finishReason!=null&&(l.finishReason=o.finishReason),await L(o.messageMetadata),o.messageMetadata!=null&&p();break}case"message-metadata":{await L(o.messageMetadata),o.messageMetadata!=null&&p();break}case"error":{n?.(new Error(o.errorText));break}default:if(Eo(o)){a?.[o.type]!=null&&await zt({value:o.data,schema:a[o.type]});const m=o;if(m.transient){i?.(m);break}const k=m.id!=null?l.message.parts.find(E=>m.type===E.type&&m.id===E.id):void 0;k!=null?k.data=m.data:l.message.parts.push(m),i?.(m),p()}}u.enqueue(o)})}}))}async function Ro({stream:e,onError:t}){const a=e.getReader();try{for(;;){const{done:s}=await a.read();if(s)break}}catch(s){t?.(s)}finally{a.releaseLock()}}Me({prefix:"aitxt",size:24});Me({prefix:"aiobj",size:24});var ko=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,a)=>{this.queue.push(async()=>{try{await e(),t()}catch(s){a(s)}}),this.processQueue()})}};Me({prefix:"aiobj",size:24});async function Oo(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:a,type:s}=t,n=await new Promise((r,i)=>{const o=new FileReader;o.onload=u=>{var l;r((l=u.target)==null?void 0:l.result)},o.onerror=u=>i(u),o.readAsDataURL(t)});return{type:"file",mediaType:s,filename:a,url:n}}))}var Mo=class{constructor({api:e="/api/chat",credentials:t,headers:a,body:s,fetch:n,prepareSendMessagesRequest:r,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=a,this.body=s,this.fetch=n,this.prepareSendMessagesRequest=r,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var a,s,n,r,i;const o=await ce(this.body),u=await ce(this.headers),l=await ce(this.credentials),p={...fe(u),...fe(t.headers)},f=await((a=this.prepareSendMessagesRequest)==null?void 0:a.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:p,credentials:l,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),y=(s=f?.api)!=null?s:this.api,b=f?.headers!==void 0?fe(f.headers):p,T=f?.body!==void 0?f.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},_=(n=f?.credentials)!=null?n:l,R=await((r=this.fetch)!=null?r:globalThis.fetch)(y,{method:"POST",headers:Zt({"Content-Type":"application/json",...b},`ai-sdk/${qt}`,Bt()),body:JSON.stringify(T),credentials:_,signal:e});if(!R.ok)throw new Error((i=await R.text())!=null?i:"Failed to fetch the chat response.");if(!R.body)throw new Error("The response body is empty.");return this.processResponseStream(R.body)}async reconnectToStream(e){var t,a,s,n,r;const i=await ce(this.body),o=await ce(this.headers),u=await ce(this.credentials),l={...fe(o),...fe(e.headers)},p=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:l,credentials:u,requestMetadata:e.metadata})),f=(a=p?.api)!=null?a:`${this.api}/${e.chatId}/stream`,y=p?.headers!==void 0?fe(p.headers):l,b=(s=p?.credentials)!=null?s:u,_=await((n=this.fetch)!=null?n:globalThis.fetch)(f,{method:"GET",headers:Zt(y,`ai-sdk/${qt}`,Bt()),credentials:b});if(_.status===204)return null;if(!_.ok)throw new Error((r=await _.text())!=null?r:"Failed to fetch the chat response.");if(!_.body)throw new Error("The response body is empty.");return this.processResponseStream(_.body)}},Za=class extends Mo{constructor(e={}){super(e)}processResponseStream(e){return so({stream:e,schema:Io}).pipeThrough(new TransformStream({async transform(t,a){if(!t.success)throw t.error;a.enqueue(t.value)}}))}},Po=class{constructor({generateId:e=nn,id:t=e(),transport:a=new Za,messageMetadataSchema:s,dataPartSchemas:n,state:r,onError:i,onToolCall:o,onFinish:u,onData:l,sendAutomaticallyWhen:p}){this.activeResponse=void 0,this.jobExecutor=new ko,this.sendMessage=async(f,y)=>{var b,T,_,S;if(f==null){await this.makeRequest({trigger:"submit-message",messageId:(b=this.lastMessage)==null?void 0:b.id,...y});return}let R;if("text"in f||"files"in f?R={parts:[...Array.isArray(f.files)?f.files:await Oo(f.files),..."text"in f&&f.text!=null?[{type:"text",text:f.text}]:[]]}:R=f,f.messageId!=null){const L=this.state.messages.findIndex(m=>m.id===f.messageId);if(L===-1)throw new Error(`message with id ${f.messageId} not found`);if(this.state.messages[L].role!=="user")throw new Error(`message with id ${f.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,L+1),this.state.replaceMessage(L,{...R,id:f.messageId,role:(T=R.role)!=null?T:"user",metadata:f.metadata})}else this.state.pushMessage({...R,id:(_=R.id)!=null?_:this.generateId(),role:(S=R.role)!=null?S:"user",metadata:f.metadata});await this.makeRequest({trigger:"submit-message",messageId:f.messageId,...y})},this.regenerate=async({messageId:f,...y}={})=>{const b=f==null?this.state.messages.length-1:this.state.messages.findIndex(T=>T.id===f);if(b===-1)throw new Error(`message ${f} not found`);this.state.messages=this.state.messages.slice(0,this.messages[b].role==="assistant"?b:b+1),await this.makeRequest({trigger:"regenerate-message",messageId:f,...y})},this.resumeStream=async(f={})=>{await this.makeRequest({trigger:"resume-stream",...f})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:f,approved:y,reason:b})=>this.jobExecutor.run(async()=>{var T,_;const S=this.state.messages,R=S[S.length-1],L=m=>He(m)&&m.state==="approval-requested"&&m.approval.id===f?{...m,state:"approval-responded",approval:{id:f,approved:y,reason:b}}:m;this.state.replaceMessage(S.length-1,{...R,parts:R.parts.map(L)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(L)),this.status!=="streaming"&&this.status!=="submitted"&&((T=this.sendAutomaticallyWhen)!=null&&T.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(_=this.lastMessage)==null?void 0:_.id})}),this.addToolOutput=async({state:f="output-available",tool:y,toolCallId:b,output:T,errorText:_})=>this.jobExecutor.run(async()=>{var S,R;const L=this.state.messages,m=L[L.length-1],k=E=>He(E)&&E.toolCallId===b?{...E,state:f,output:T,errorText:_}:E;this.state.replaceMessage(L.length-1,{...m,parts:m.parts.map(k)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(k)),this.status!=="streaming"&&this.status!=="submitted"&&((S=this.sendAutomaticallyWhen)!=null&&S.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(R=this.lastMessage)==null?void 0:R.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var f;this.status!=="streaming"&&this.status!=="submitted"||(f=this.activeResponse)!=null&&f.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=a,this.generateId=e,this.messageMetadataSchema=s,this.dataPartSchemas=n,this.state=r,this.onError=i,this.onToolCall=o,this.onFinish=u,this.onData=l,this.sendAutomaticallyWhen=p}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:a,body:s,messageId:n}){var r,i,o,u;this.setStatus({status:"submitted",error:void 0});const l=this.lastMessage;let p=!1,f=!1,y=!1;try{const b={state:$o({lastMessage:this.state.snapshot(l),messageId:this.generateId()}),abortController:new AbortController};b.abortController.signal.addEventListener("abort",()=>{p=!0}),this.activeResponse=b;let T;if(e==="resume-stream"){const S=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:a,body:s});if(S==null){this.setStatus({status:"ready"});return}T=S}else T=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:b.abortController.signal,metadata:t,headers:a,body:s,trigger:e,messageId:n});const _=S=>this.jobExecutor.run(()=>S({state:b.state,write:()=>{var R;this.setStatus({status:"streaming"}),b.state.message.id===((R=this.lastMessage)==null?void 0:R.id)?this.state.replaceMessage(this.state.messages.length-1,b.state.message):this.state.pushMessage(b.state.message)}}));await Ro({stream:To({stream:T,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:_,onError:S=>{throw S}}),onError:S=>{throw S}}),this.setStatus({status:"ready"})}catch(b){if(p||b.name==="AbortError")return p=!0,this.setStatus({status:"ready"}),null;y=!0,b instanceof TypeError&&(b.message.toLowerCase().includes("fetch")||b.message.toLowerCase().includes("network"))&&(f=!0),this.onError&&b instanceof Error&&this.onError(b),this.setStatus({status:"error",error:b})}finally{try{(i=this.onFinish)==null||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:p,isDisconnect:f,isError:y,finishReason:(r=this.activeResponse)==null?void 0:r.state.finishReason})}catch(b){console.error(b)}this.activeResponse=void 0}(o=this.sendAutomaticallyWhen)!=null&&o.call(this,{messages:this.state.messages})&&!y&&await this.makeRequest({trigger:"submit-message",messageId:(u=this.lastMessage)==null?void 0:u.id,metadata:t,headers:a,body:s})}};function No({messages:e}){const t=e[e.length-1];if(!t||t.role!=="assistant")return!1;const a=t.parts.reduce((n,r,i)=>r.type==="step-start"?i:n,-1),s=t.parts.slice(a+1).filter(He).filter(n=>!n.providerExecuted);return s.length>0&&s.every(n=>n.state==="output-available"||n.state==="output-error")}var Lo=class{constructor(e){this.statusRef=z("ready"),this.errorRef=z(void 0),this.pushMessage=t=>{this.messagesRef.value=[...this.messagesRef.value,t]},this.popMessage=()=>{this.messagesRef.value=this.messagesRef.value.slice(0,-1)},this.replaceMessage=(t,a)=>{this.messagesRef.value[t]={...a}},this.snapshot=t=>t,this.messagesRef=z(e??[])}get messages(){return this.messagesRef.value}set messages(e){this.messagesRef.value=e}get status(){return this.statusRef.value}set status(e){this.statusRef.value=e}get error(){return this.errorRef.value}set error(e){this.errorRef.value=e}},Do=class extends Po{constructor({messages:e,...t}){super({...t,state:new Lo(e)})}};function Uo(e,t){const a=s=>({success:!1,error:t?.(s)??null});return(...s)=>{try{const n=e(...s);return n instanceof Promise?n.catch(a):n}catch(n){return a(n)}}}function Bo(e,t){const a=n=>({success:!1,error:t?.(n)??null}),s=n=>({success:!0,data:n});try{const n=e();return n instanceof Promise?n.then(s).catch(a):s(n)}catch(n){return a(n)}}function Zo(e){let t=!0;const a=[],s=[];for(const n of e)n.success?s.push(n.data):(t=!1,a.push(n.error));return t?{success:!0,data:s}:{success:!1,error:a}}const de={safeFn:Uo,fromUnsafe:Bo,resultsToResult:Zo};function X(e,t){return{code:e,detail:t}}const Le=Q.object({id:Q.string(),title:Q.string(),namespace:Q.string(),currentVersion:Q.string(),logoUrl:Q.url().nullable(),slug:Q.string()});function jo(e){return Object.values(e.paths??{}).flatMap(t=>Object.values(t??{}))}function Vo(e,t,a){return Object.values(sa(t?.components?.securitySchemes,{},a,e))}function it(e){return Object.fromEntries(Object.entries(e.workspace.documents).map(([t,a])=>{const s=vt(a.servers,{documentUrl:a?.["x-scalar-original-source-url"]});return[t,{activeServer:ht(a,s),securitySchemes:Vo(t,a,e.auth)}]}))}const Jt=$s(),ja=()=>{const e=t=>`${Ts.AUTH}-${t}`;return{getAuth:t=>{const a=JSON.parse(Jt.getItem(e(t))??"{}");return Es(Cs,a)},setAuth:(t,a)=>{Jt.setItem(e(t),JSON.stringify(a))}}},Ho=({documentName:e,workspaceStore:t})=>{const a=ja().getAuth(e);t.auth.load({[e]:a})};function zo(e){try{return JSON.parse(e)}catch{return}}function _t(e){try{if(e.startsWith("/")||e.startsWith("http://localhost"))return e;const t=new URLSearchParams({scalar_url:e});return new URL(`https://proxy.scalar.com/?${t}`).toString()}catch{return console.error(`Invalid URL provided: ${e}`),e}}function Va({getAccessToken:e,getAgentKey:t}){const a=e?.(),s=t?.();return{...a&&{Authorization:`Bearer ${a}`},...s&&{"x-scalar-agent-key":s}}}function qo({baseUrl:e,getAccessToken:t,getAgentKey:a}){const s=de.safeFn(async({path:n,method:r="get",query:i,body:o,responseSchema:u})=>{const l=`${e}${n}${i?`?${new URLSearchParams(i)}`:""}`,p=await de.fromUnsafe(async()=>fetch(_t(l),{method:r,...o&&{body:JSON.stringify(o)},headers:{...Va({getAccessToken:t,getAgentKey:a})}}),b=>X("FAILED_TO_FETCH",b));if(!p.success)return p;const f=await de.fromUnsafe(async()=>p.data.json(),b=>X("FAILED_TO_FETCH_DATA",b));if(!f.success)return{success:!1,error:X("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")};if(!p.data.ok){const b=Q.object({message:Q.string(),code:Q.string()}).safeParse(f.data);return b.success?{success:!1,error:X(b.data.code,b.data.message)}:{success:!1,error:X("UNKNOWN_ERROR","Unknown error occurred. Please contact support.")}}const y=u.safeParse(f.data);return y.success?{success:!0,data:y.data}:{success:!1,error:X("INVALID_RESPONSE","Invalid response. Please contact support")}});return{search:async n=>s({path:"/vector/registry/search",query:{query:n},responseSchema:Q.object({results:Le.array()})}),getDocument:async n=>s({path:`/vector/registry/document/${n.namespace}/${n.slug}`,responseSchema:Le}),getKeyDocuments:async()=>s({path:"/vector/registry/documents",responseSchema:Q.object({documents:Le.array()})}),getCuratedDocuments:async()=>s({path:"/vector/registry/curated",responseSchema:Q.object({results:Le.array()})})}}const Fo=e=>{const t=Wt(e,0);if(t===void 0||!Wo(e[t]))return;const a=Wt(e,t+1);if(a!==void 0)return Go(e,t,a)},Wt=(e,t)=>{for(let a=t;a<e.length;a+=1){const s=e[a];if(!Jo(s))return a}},Jo=e=>e===" "||e==="	"||e===`
`||e==="\r",Wo=e=>e==="{"||e==="[",Go=(e,t,a)=>{let s;for(let n=a-1;n>t;n-=1){const r=e[n];if(r==="\r")return;if(r===`
`)return Yo(s);if(s===void 0)s=r;else if(s[0]===r)s+=r;else return}},Yo=e=>e===void 0?0:e[0]===" "?e.length:e,Xo=(e,t)=>{const a=lt(e,"toPrecision",t,t);return a===void 0?lt(e,"toExponential",t,t):a},lt=(e,t,a,s)=>{const r=e[t](s).replace(Ko,"$1").replace(Qo,"$1");return r.length<=a?r:s===1?void 0:lt(e,t,a,s-1)},Ko=/(e)\+/iu,Qo=/\.?0*($|e)/iu,ei=(e,t)=>{if(typeof e!="string")throw new TypeError(`Input must be a JSON string: ${e}`);ti(t)},ti=e=>{ai(e)},ai=e=>{if(!Number.isInteger(e))throw new TypeError(`"maxSize" argument must be an integer: ${e}`)},Ha=(e,t,a)=>{const s=Fa(t,a);return za(e,t,s)},za=(e,t,a)=>{if(a>=t)return a;const s=e[a];return s>=di&&s<=pi?za(e,t,a+1):a},qa=(e,t,a)=>{if(a===void 0)return a;const s=Fa(t,a);return si(e,s)},si=(e,t)=>ri(e,t)?t-3:ni(e,t)?t-2:oi(e,t)?t-1:t,ri=(e,t)=>t>=3&&e[t-3]>=ii&&e[t-3]<=li,ni=(e,t)=>t>=2&&e[t-2]>=ci,oi=(e,t)=>t>=1&&e[t-1]>=ui,Fa=(e,t)=>t<0||Object.is(t,-0)?Math.max(e+t,0):t,ii=240,li=244,ci=224,ui=194,di=128,pi=191,mi=(e,t,a)=>{const s=globalThis.Buffer.from(e),n=Ha(s,s.length,t),r=qa(s,s.length,a);return n===0&&r>=s.length?s.toString():s.toString("utf8",n,r)},Ja=127,Wa=2047,wt=55296,Ga=56319,Ya=56320,xt=57343,fi=/[\uD800-\uDFFF]/gu,gi="ï¿½",Xa=e=>vi(e)?e.replace(fi,gi):e,vi=e=>{for(let t=0;t<e.length;t+=1){const a=e.codePointAt(t);if(a>=wt&&a<=xt)return!0}return!1},Ka=({input:e,targetByteCount:t,firstStartSurrogate:a,lastStartSurrogate:s,firstEndSurrogate:n,lastEndSurrogate:r,increment:i,canBacktrack:o,shift:u,charIndexInit:l})=>{let p=l,f=p,y=0;for(;y<t;p+=i){f=p;const T=e.charCodeAt(p);if(Number.isNaN(T))break;if(T<=Ja){y+=1;continue}if(T<=Wa){y+=2;continue}if(y+=3,T<a||T>s)continue;const _=e.charCodeAt(p+i);Number.isNaN(_)||_<n||_>r||(y+=1,p+=i)}return(o&&y>t?f:p)+u},Qa=(e,t,a)=>t<0||Object.is(t,-0)?yi(e,t,a):hi(e,t,a),hi=(e,t,a)=>Ka({input:e,targetByteCount:t,firstStartSurrogate:wt,lastStartSurrogate:Ga,firstEndSurrogate:Ya,lastEndSurrogate:xt,increment:1,canBacktrack:a,shift:0,charIndexInit:0}),yi=(e,t,a)=>Ka({input:e,targetByteCount:-t,firstStartSurrogate:Ya,lastStartSurrogate:xt,firstEndSurrogate:wt,lastEndSurrogate:Ga,increment:-1,canBacktrack:!a,shift:1,charIndexInit:e.length-1}),ct=(e,t,a)=>{const s=Qa(e,t,!1),n=bi(e,a),r=s===0&&n===void 0?e:e.slice(s,n);return Xa(r)},bi=(e,t)=>{if(t===void 0)return t;const a=Qa(e,t,!0);return a===e.length?void 0:a},_i=(e,t,a)=>{const{textEncoder:s,textDecoder:n}=wi(),r=xi(e),{written:i}=s.encodeInto(e,r),o=Ha(r,i,t),u=qa(r,i,a),l=u===void 0?i:Math.min(u,i),p=r.subarray(o,l);return n.decode(p)},wi=()=>(Qe===void 0&&(Qe=new globalThis.TextEncoder,Gt=new globalThis.TextDecoder("utf8",{fatal:!1})),{textEncoder:Qe,textDecoder:Gt});let Qe,Gt;const xi=e=>{const t=e.length*3;return t>Si?new Uint8Array(t):((De===void 0||De.length<t)&&(De=new Uint8Array(t)),De)},Si=1e5;let De;const Ai=(e,t)=>{if(t===void 0)return t;const a=es(e,t);return a>=e.length*ts?void 0:a},es=(e,t)=>t<=e.length*-ts?0:t,ts=4,Ii=(e,t,a)=>{if(typeof e!="string")throw new TypeError(`First argument must be a string: ${e}`);Ei(t),Ci(a)},Ei=e=>{as("Second",e)},Ci=e=>{e!==void 0&&as("Third",e)},as=(e,t)=>{if(!Number.isInteger(t))throw new TypeError(`${e} argument must be an integer: ${t}`)},$i=e=>{let t=!0,a=0;for(let s=0;s<ut;s+=1){const n=Ti(e,s);n<=Ja||(t&&(t=!1),n>Wa&&(a+=1))}return{asciiOnly:t,longCharsPercentage:a/ut}},Ti=(e,t)=>{const a=ut-1,s=1-(a-t)/a,n=Math.round(s*(e.length-1));return e.charCodeAt(n)},ut=50,Ri=(e,t,a)=>{if(Ii(e,t,a),e==="")return e;const s=es(e,t),n=Ai(e,a);return n===void 0&&Object.is(s,0)?Xa(e):ki(e,s,n)},ki=(e,t,a)=>{if(e.length<=Oi)return ct(e,t,a);const{asciiOnly:s,longCharsPercentage:n}=$i(e);return s?Pi(e,t,a):n>=Mi?ct(e,t,a):ss(e,t,a)},Oi=200,Mi=.4,Pi=(e,t,a)=>"Buffer"in globalThis&&"from"in globalThis.Buffer?mi(e,t,a):ss(e,t,a),ss=(e,t,a)=>"TextEncoder"in globalThis?_i(e,t,a):ct(e,t,a),Ni=(e,t)=>{const a=JSON.stringify(e),s=Ui(a),n=Ri(s,0,t-Yt.length-Re.length*2),i=`${Li(n)}${Yt}`;return Bi(i)},Li=e=>e.replace(Di,""),Di=/(\\|\\u[0-9a-fA-F]{0,3})$/u,Ui=e=>e.slice(Re.length,-Re.length),Bi=e=>`${Re}${e}${Re}`,Re='"',Yt="...",Zi=e=>globalThis.Buffer.byteLength(e),rs=e=>{const t=e.length;let a=t;for(let s=0;s<t;s+=1){const n=e.charCodeAt(s);if(n<=ji)continue;if(n<=Vi){a+=1;continue}if(a+=2,n<Hi||n>zi)continue;const r=e.charCodeAt(s+1);r<qi||r>Fi||(s+=1)}return a},ji=127,Vi=2047,Hi=55296,zi=56319,qi=56320,Fi=57343,Ji=()=>Wi.bind(void 0,new TextEncoder),Wi=(e,t)=>{const a=Gi(t);return e.encodeInto(t,a).written},Gi=e=>{const t=e.length*3;return t>Yi?new Uint8Array(t):((Ue===void 0||Ue.length<t)&&(Ue=new Uint8Array(t)),Ue)},Yi=1e5;let Ue;const Xi=100,Ki=()=>"Buffer"in globalThis&&"byteLength"in globalThis.Buffer?Zi:"TextEncoder"in globalThis?Qi.bind(void 0,Ji()):rs,Qi=(e,t)=>t.length<Xi?rs(t):e(t),el=Ki(),tl=e=>{if(e===null)return al;if(e===!0)return sl;if(e===!1)return rl;const t=typeof e;return t==="object"?nl:t==="number"?JSON.stringify(e).length:ns(e)},al=4,sl=4,rl=5,nl=2,ns=e=>el(JSON.stringify(e)),os=({size:e,increment:t,maxSize:a,truncatedProps:s,path:n,value:r})=>{const i=e+t,o=i>a;return o?{size:e,stop:o,truncatedProps:[...s,{path:n,value:r}]}:{size:i,stop:o,truncatedProps:s}},ol=e=>tl(e),il=(e,t,a)=>{const s=is({empty:e,indent:t,depth:a,keySpaceSize:0}),n=ls(e);return s+n},ll=({key:e,empty:t,indent:a,depth:s})=>{const n=is({empty:t,indent:a,depth:s,keySpaceSize:1}),r=ns(e),i=ls(t);return n+r+cl+i},cl=1,is=({empty:e,indent:t,depth:a,keySpaceSize:s})=>{if(t===void 0)return 0;const n=Xt+t*(a+1),r=e?Xt+t*a:0;return s+n+r},Xt=1,ls=e=>e?0:ul,ul=1,cs=({parent:e,truncatedProps:t,path:a,increment:s,maxSize:n,key:r,empty:i,size:o,truncateValue:u,indent:l,depth:p})=>{const f=e[r],y=[...a,r],{size:b,stop:T,truncatedProps:_}=os({size:o,increment:s,maxSize:n,truncatedProps:t,path:y,value:f});return T?{empty:i,size:b,truncatedProps:_}:dl({value:f,truncatedProps:t,path:y,maxSize:n,empty:i,size:o,newSize:b,truncateValue:u,indent:l,depth:p})},dl=({value:e,truncatedProps:t,path:a,maxSize:s,empty:n,size:r,newSize:i,truncateValue:o,indent:u,depth:l})=>{const{value:p,size:f,truncatedProps:y}=o({value:e,truncatedProps:t,path:a,size:i,maxSize:s,indent:u,depth:l+1});return p===void 0?{empty:n,size:r,truncatedProps:y}:{empty:!1,size:f,value:p,truncatedProps:y}},pl=({array:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:r,indent:i,depth:o})=>{const u=[];let l={empty:!0,size:s,truncatedProps:t};for(let p=0;p<e.length;p+=1){const f=il(l.empty,i,o);l=cs({parent:e,truncatedProps:l.truncatedProps,path:a,increment:f,maxSize:n,key:p,empty:l.empty,size:l.size,truncateValue:r,indent:i,depth:o}),l.value!==void 0&&u.push(l.value)}return{value:u,size:l.size,truncatedProps:l.truncatedProps}},ml=({object:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:r,indent:i,depth:o})=>{const u={};let l={empty:!0,size:s,truncatedProps:t};for(const p in e){const f=ll({key:p,empty:l.empty,indent:i,depth:o});l=cs({parent:e,truncatedProps:l.truncatedProps,path:a,increment:f,maxSize:n,key:p,empty:l.empty,size:l.size,truncateValue:r,indent:i,depth:o}),l.value!==void 0&&(u[p]=l.value)}return{value:u,size:l.size,truncatedProps:l.truncatedProps}},dt=({value:e,truncatedProps:t,path:a,size:s,maxSize:n,indent:r,depth:i})=>{const o=ol(e),{size:u,stop:l,truncatedProps:p}=os({size:s,increment:o,maxSize:n,truncatedProps:t,path:a,value:e});return l?{value:void 0,size:u,truncatedProps:p}:fl({value:e,truncatedProps:p,path:a,size:u,maxSize:n,indent:r,depth:i})},fl=({value:e,truncatedProps:t,path:a,size:s,maxSize:n,indent:r,depth:i})=>typeof e!="object"||e===null?{value:e,size:s,truncatedProps:t}:Array.isArray(e)?pl({array:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:dt,indent:r,depth:i}):ml({object:e,truncatedProps:t,path:a,size:s,maxSize:n,truncateValue:dt,indent:r,depth:i}),gl=(e,t)=>{ei(e,t);const a=vl(e),s=hl(e),{value:n,truncatedProps:r}=dt({value:s,truncatedProps:[],path:[],size:0,maxSize:t,indent:a,depth:0});return{jsonString:yl({newValue:n,value:s,maxSize:t,indent:a}),truncatedProps:r}},vl=e=>{const t=Fo(e);return typeof t=="string"?t.length:t},hl=e=>{try{return JSON.parse(e)}catch(t){throw new TypeError(`Invalid JSON string: "${e}"
${t.message}`)}},yl=({newValue:e,value:t,maxSize:a,indent:s})=>e!==void 0?JSON.stringify(e,void 0,s):typeof t=="number"?Xo(t,a):Ni(t,a);function Je(e,t){return`${e}/${t}`}const us="---",Ne="execute-request";D({method:h(),path:h(),headers:we(h(),h()).optional(),body:h().optional(),documentIdentifier:h()});const bl=5e4,_l=de.safeFn(async e=>e.headers.get("content-type")==="application/json"?{success:!0,data:await e.json()}:{success:!0,data:await e.text()},e=>X("FAILED_TO_PARSE_RESPONSE_BODY",{originalError:e})),Kt=e=>JSON.parse(gl(JSON.stringify(e),bl).jsonString),wl=de.safeFn(async(e,t)=>{const a=await fetch(e,t),s=await _l(a);return a.ok?s.success?{success:!0,data:{status:a.status,responseBody:Kt(s.data),headers:Object.fromEntries(a.headers.entries())}}:s:{success:!1,error:X("REQUEST_NOT_OK",{status:a.status,url:a.url,responseBody:Kt(s.success?s.data:void 0),headers:Object.fromEntries(a.headers.entries())})}},e=>X("FAILED_TO_FETCH",{originalError:e}));function xl({path:e,activeServer:t}){const a=ks({path:e,server:t,pathVariables:{},environment:{variables:[]}});return Os("https://proxy.scalar.com",a)}const ds=de.safeFn(async({documentSettings:e,toolCallId:t,chat:a,input:{method:s,path:n,body:r,headers:i,documentIdentifier:o}})=>{const[u,l]=o.split(us);if(!u||!l)return{success:!1,error:X("FAILED_TO_DETERMINE_DOCUMENT",{namespace:u,slug:l,documentIdentifier:o})};const p=Je(u,l),f=e[p];if(!f)return{success:!1,error:X("DOCUMENT_SETTINGS_COULD_NOT_BE_DETERMINED",{documentName:p,namespace:u,slug:l})};const y=Rs(f.securitySchemes),b={method:s,body:r,...y,headers:{...i,...y.headers}},T=xl({path:n,activeServer:f.activeServer}),_=await wl(T,b);return a.addToolOutput({tool:Ne,toolCallId:t,output:_,state:"output-available"}),_},e=>X("FAILED_TO_EXECUTE_REQUEST",e)),Qt="scalar/agent-terms-accepted";function Sl(){const e=z(!1);ze(()=>{e.value=localStorage.getItem(Qt)==="true"});function t(){e.value=!0,localStorage.setItem(Qt,"true")}return{accepted:e,accept:t}}const Al=({debounceDelay:e=500,maxWait:t=1e4,persistAuth:a=!1})=>{const{execute:s}=Ms({delay:e,maxWait:t}),n=ja(),r=()=>typeof a=="function"?a():a;return{hooks:{onWorkspaceStateChanges(i){r()&&i.type==="auth"&&s("auth",()=>n.setAuth(i.documentName,i.value))}}}},ea=de.safeFn(async({namespace:e,slug:t,workspaceStore:a,registryDocuments:s,registryUrl:n,config:r,api:i,removable:o})=>{const u=await i.getDocument({namespace:e,slug:t});if(!u.success)return u;s.value.push({...u.data,removable:o});const l=new URL(`/@${e}/apis/${t}/latest`,n),p=await Ps(l.toString(),{plugins:[Ns()],treeShake:!1}),f=Je(e,t);return await a.addDocument({name:f,document:p},r),a.update("x-scalar-active-document",f),Ho({documentName:f,workspaceStore:a}),{success:!0,data:u.data}},e=>X("UNABLE_TO_LOAD_DOCUMENT",e)),ps=Symbol("STATE_SYMBOL"),{toast:et}=na();function Il({registryDocuments:e,workspaceStore:t,baseUrl:a,getAccessToken:s,getAgentKey:n}){const r=new Do({sendAutomaticallyWhen:No,transport:new Za({api:_t(`${a}/vector/openapi/chat`),headers:()=>Va({getAccessToken:s,getAgentKey:n}),body:()=>({registryDocuments:e.value,documentSettings:it(t)})}),async onToolCall({toolCall:i}){i.dynamic||i.toolName===Ne&&i.input.method.toLowerCase()==="get"&&await ds({documentSettings:it(t),input:i.input,toolCallId:i.toolCallId,chat:r})}});return r}function El({initialRegistryDocuments:e,registryUrl:t,dashboardUrl:a,baseUrl:s,mode:n,isLoggedIn:r,getAccessToken:i,getAgentKey:o,getActiveDocumentJson:u,prefilledMessageRef:l}){const p=z(l?.value??""),f=z([]),y=Be({}),b=z([]),T=z("https://proxy.scalar.com"),_=z(),S=Sl(),R=Ls(),L=Ds({plugins:[Al({persistAuth:!0})]}),m=O(()=>Us.parse({proxyUrl:T.value,persistAuth:!0})),k=Il({registryDocuments:f,workspaceStore:L,baseUrl:s,getAccessToken:i,getAgentKey:o}),E=qo({baseUrl:s,getAccessToken:i,getAgentKey:o}),A=O(()=>k.status==="submitted"||k.status==="streaming"&&!k.lastMessage?.parts.some(V=>V.type==="text"));ne(()=>k.status,()=>{k.status==="streaming"&&(p.value="")}),l&&ne(l,async V=>{V&&(p.value=V,S.accepted.value&&await k.sendMessage({text:p.value}))});const U=ra();async function q({namespace:V,slug:W,removable:be=!0}){if(f.value.find(re=>re.namespace===V&&re.slug===W))return;const Ae=`@${V}/${W}`;y[Ae]=!0;const _e=await ea({namespace:V,slug:W,workspaceStore:L,registryUrl:t,registryDocuments:f,config:m.value,api:E,removable:be});if(y[Ae]=!1,!_e.success)throw console.warn("[AGENT]: Unable to load document",_e.error),et(`Unable to load the document @${V}/${W}`,"warn"),_e.error}async function ye({namespace:V,slug:W,removable:be=!0}){if(f.value.find(re=>re.namespace===V&&re.slug===W))return;const Ae=`@${V}/${W}`;y[Ae]=!0;const _e=await de.fromUnsafe(()=>fetch(_t(`${s}/vector/registry/embeddings/${V}/${W}`),{method:"GET"}),re=>X("FAILED_TO_GET_EMBEDDING_STATUS",re));if(_e.success&&_e.data.ok){const re=await ea({namespace:V,slug:W,workspaceStore:L,registryUrl:t,registryDocuments:f,config:m.value,api:E,removable:be});re.success||(console.warn("[AGENT]: Unable to load document",re.error),et(`Unable to load the document @${V}/${W}`,"warn"))}else console.warn("[AGENT]: Document could not be embedded"),et(`Unable to embed the document @${V}/${W}`,"warn");y[Ae]=!1}function Ge({namespace:V,slug:W}){f.value=f.value.filter(be=>!(be.namespace===V&&be.slug===W)),L.deleteDocument(Je(V,W))}return e.forEach(({namespace:V,slug:W})=>q({namespace:V,slug:W,removable:!1})),{prompt:p,chat:k,workspaceStore:L,eventBus:R,loading:A,settingsModal:U,config:m,registryUrl:t,dashboardUrl:a,baseUrl:s,registryDocuments:f,pendingDocuments:y,proxyUrl:T,mode:n,terms:S,isLoggedIn:r,addDocument:q,addDocumentAsync:ye,removeDocument:Ge,getAccessToken:i,getAgentKey:o,api:E,uploadedTmpDocumentUrl:_,curatedDocuments:b,getActiveDocumentJson:u}}function H(){const e=Bs(ps);if(!e)throw new Error("No state provided.");return e}function Cl(){const{api:e,addDocument:t,mode:a,getAgentKey:s}=H(),{toast:n}=na();ze(async()=>{if(a!=="full"||!s)return;const r=await e.getKeyDocuments();if(!r.success){n("Unable to fetch registry documents for the provided key","error");return}r.data.documents.forEach(({namespace:i,slug:o})=>t({namespace:i,slug:o,removable:!1}))})}function $l(){const e=H();function t(a){const s=a?.parts.at(-1);if(s&&s.type==="text")return s.text}ne([()=>e.chat.status,()=>t(e.chat.lastMessage)],async()=>{await Zs(),window.scrollTo(0,document.body.scrollHeight)})}function Tl(){const{api:e,curatedDocuments:t}=H();ze(async()=>{const a=await e.getCuratedDocuments();a.success&&(t.value=a.data.results)})}const We=Oe("ZodMiniType",(e,t)=>{if(!e._zod)throw new Error("Uninitialized schema in ZodMiniType.");zs.init(e,t),e.def=t,e.type=t.type,e.parse=(a,s)=>qs(e,a,s,{callee:e.parse}),e.safeParse=(a,s)=>Fs(e,a,s),e.parseAsync=async(a,s)=>Js(e,a,s,{callee:e.parseAsync}),e.safeParseAsync=async(a,s)=>Ws(e,a,s),e.check=(...a)=>e.clone({...t,checks:[...t.checks??[],...a.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]},{parent:!0}),e.with=e.check,e.clone=(a,s)=>Gs(e,a,s),e.brand=()=>e,e.register=((a,s)=>(a.add(e,s),e)),e.apply=a=>a(e)}),Rl=Oe("ZodMiniString",(e,t)=>{Xs.init(e,t),We.init(e,t)});function ge(e){return Ys(Rl,e)}const kl=Oe("ZodMiniNumber",(e,t)=>{er.init(e,t),We.init(e,t)});function Ol(e){return Qs(kl,e)}const Ml=Oe("ZodMiniObject",(e,t)=>{Vs.init(e,t),We.init(e,t),Hs(e,"shape",()=>t.shape)});function St(e,t){const a={type:"object",shape:e??{},...js(t)};return new Ml(a)}const Pl=Oe("ZodMiniOptional",(e,t)=>{Ks.init(e,t),We.init(e,t)});function Nl(e){return new Pl({type:"optional",innerType:e})}const ms="scalar-tmp-doc";function Ll({namespace:e,slug:t}){localStorage.setItem(ms,JSON.stringify({namespace:e,slug:t}))}function Dl(){const e=localStorage.getItem(ms);if(e)return St({namespace:ge(),slug:ge()}).parse(JSON.parse(e))}function Ul(){const e=H(),t=z();function a(n){const r=`${e.baseUrl}${n}`;if(r.startsWith("/"))return r;const i=new URLSearchParams({scalar_url:r.toString()});return new URL(`https://proxy.scalar.com/?${i}`)}async function s(n,r=!1){try{t.value={type:"uploading"};const i=await fetch(a(`/core/share/upload/apis${r?"?source=agent":""}`),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({document:n})});if(!i.ok){t.value={type:"error",error:"Failed to upload document."};return}const o=await i.json(),{success:u,data:l}=St({url:ge(),namespace:ge(),slug:ge()}).safeParse(o);if(!u){t.value={type:"error",error:"Failed to process document."};return}t.value={type:"processing"};const p=await fetch(a(`/vector/registry/embeddings/${l.namespace}/${l.slug}`),{method:"GET"});if(Ll({namespace:l.namespace,slug:l.slug}),await e.addDocument({namespace:l.namespace,slug:l.slug,removable:!1}),!p.ok){t.value={type:"error",error:"Failed to embed document."};return}return t.value={type:"done"},e.uploadedTmpDocumentUrl.value=l.url,setTimeout(()=>{t.value=void 0},2e3),l}catch{t.value={type:"error",error:"Failed to upload document."};return}}return{uploadTempDocument:s,uploadState:t}}const fs="ask-for-authentication";D({uniqueIdentifier:h()});const Bl="get-mini-openapi-spec";D({question:h()});const Zl="get-openapi-specs-summary",N=(e,t)=>{const a=e.__vccOpts||e;for(const[s,n]of t)a[s]=n;return a},jl={},Vl={class:"authenticationProvided"};function Hl(e,t){return c(),g("div",Vl,[...t[0]||(t[0]=[Se('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-e3416cd5><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-e3416cd5></rect><g clip-path="url(#clip0_74_840)" data-v-e3416cd5><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-e3416cd5></path></g><defs data-v-e3416cd5><clipPath id="clip0_74_840" data-v-e3416cd5><rect height="8" rx="4" width="8" x="4" y="4" data-v-e3416cd5></rect></clipPath></defs></svg> Authorized ',2)])])}const zl=N(jl,[["render",Hl],["__scopeId","data-v-e3416cd5"]]),ql={},Fl={class:"authenticationRequired"};function Jl(e,t){return c(),g("div",Fl,[...t[0]||(t[0]=[Se('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d15ef40b><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d15ef40b></rect><g clip-path="url(#clip0_74_585)" data-v-d15ef40b><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d15ef40b></path></g><defs data-v-d15ef40b><clipPath id="clip0_74_585" data-v-d15ef40b><rect height="8" rx="4" width="8" x="4" y="4" data-v-d15ef40b></rect></clipPath></defs></svg> Authentication required ',2)])])}const Wl=N(ql,[["render",Jl],["__scopeId","data-v-d15ef40b"]]),gs=P({__name:"Auth",props:{options:{},name:{},authStore:{},document:{},eventBus:{},selectedServer:{},environment:{}},setup(e){const{workspaceStore:t}=H(),a=O(()=>sr(e.document?.security)),s=O(()=>rr(e.authStore.getAuthSelectedSchemas({type:"document",documentName:e.name}),void 0,a.value)),n=nr(),{focused:r}=tr(n),i=O(()=>sa(e.document?.components?.securitySchemes??{},e.options.authentication?.securitySchemes,e.authStore,e.name));return ne(r,o=>{o&&t.update("x-scalar-active-document",e.name)}),(o,u)=>(c(),g("div",{ref_key:"focusRef",ref:n,tabindex:"0"},[Object.keys(i.value).length?(c(),x(d(ar),{key:0,authStore:e.authStore,documentSlug:e.name,environment:e.environment,eventBus:e.eventBus,isReadOnly:"",isStatic:"",layout:"reference",meta:{type:"document"},persistAuth:e.options.persistAuth,proxyUrl:e.options.proxyUrl??"",securityRequirements:a.value,securitySchemes:i.value,selectedSecurity:s.value,server:e.selectedServer,title:"Authentication"},null,8,["authStore","documentSlug","environment","eventBus","persistAuth","proxyUrl","securityRequirements","securitySchemes","selectedSecurity","server"])):I("",!0)],512))}}),Gl={class:"toggleButton"},Yl={class:"authContent"},Xl={class:"authContentInner"},Kl=P({__name:"AskForAuthentication",props:{messagePart:{}},setup(e){const{workspaceStore:t,eventBus:a,config:s,chat:n}=H(),r=O(()=>{if(!e.messagePart.value.input?.uniqueIdentifier||e.messagePart.value.state!=="input-available")return;const[f,y]=e.messagePart.value.input.uniqueIdentifier.split(us);if(!(!f||!y))return Je(f,y)}),i=O(()=>{if(r.value)return t.workspace.documents[r.value]}),o=O(()=>{if(i.value)return ia(t,i.value)}),u=O(()=>{if(!i.value)return;const f=vt(i.value.servers,{documentUrl:i.value["x-scalar-original-source-url"]});return ht(i.value,f)}),l=O(()=>r.value&&o.value&&u.value);async function p(){await n.addToolOutput({toolCallId:e.messagePart.value.toolCallId,output:"Authentication provided.",tool:fs,state:"output-available"})}return(f,y)=>(c(),g("div",{class:oe(["askForAuthentication",{open:l.value}])},[v("div",Gl,[e.messagePart.value.state==="output-available"?(c(),x(zl,{key:0})):I("",!0),e.messagePart.value.state==="input-available"?(c(),x(Wl,{key:1})):I("",!0),e.messagePart.value.state==="input-available"?(c(),x(d(oa),{key:2,class:"authorizeButton",size:"xs",onClick:p},{default:J(()=>[y[0]||(y[0]=j(" Authorize ",-1)),$(d(Pr),{weight:"bold"})]),_:1})):I("",!0)]),v("div",Yl,[v("div",Xl,[r.value&&i.value&&o.value&&u.value?(c(),x(gs,{key:0,authStore:d(t).auth,document:i.value,environment:o.value,eventBus:d(a),name:r.value,options:d(s),selectedServer:u.value},null,8,["authStore","document","environment","eventBus","name","options","selectedServer"])):I("",!0)])])],2))}}),Ql=N(Kl,[["__scopeId","data-v-169d0bc0"]]),ec={},tc={class:"autosendPaused"};function ac(e,t){return c(),g("div",tc,[...t[0]||(t[0]=[Se('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-d08225db><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.5" width="14.25" x="0.875" y="0.875" data-v-d08225db></rect><g clip-path="url(#clip0_74_585)" data-v-d08225db><path d="M10.75 5.5V10.5C10.75 10.6326 10.6973 10.7598 10.6036 10.8536C10.5098 10.9473 10.3826 11 10.25 11H9C8.86739 11 8.74021 10.9473 8.64645 10.8536C8.55268 10.7598 8.5 10.6326 8.5 10.5V5.5C8.5 5.36739 8.55268 5.24021 8.64645 5.14645C8.74021 5.05268 8.86739 5 9 5H10.25C10.3826 5 10.5098 5.05268 10.6036 5.14645C10.6973 5.24021 10.75 5.36739 10.75 5.5ZM7 5H5.75C5.61739 5 5.49021 5.05268 5.39645 5.14645C5.30268 5.24021 5.25 5.36739 5.25 5.5V10.5C5.25 10.6326 5.30268 10.7598 5.39645 10.8536C5.49021 10.9473 5.61739 11 5.75 11H7C7.13261 11 7.25979 10.9473 7.35355 10.8536C7.44732 10.7598 7.5 10.6326 7.5 10.5V5.5C7.5 5.36739 7.44732 5.24021 7.35355 5.14645C7.25979 5.05268 7.13261 5 7 5Z" fill="currentColor" data-v-d08225db></path></g><defs data-v-d08225db><clipPath id="clip0_74_585" data-v-d08225db><rect height="8" rx="4" width="8" x="4" y="4" data-v-d08225db></rect></clipPath></defs></svg> Accept Request to Continue ',2)])])}const sc=N(ec,[["render",ac],["__scopeId","data-v-d08225db"]]),rc={},nc={class:"buildingRequest"};function oc(e,t){return c(),g("div",nc,[...t[0]||(t[0]=[v("div",{class:"playIcon"},[v("svg",{fill:"currentColor",height:"32",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"})])],-1),j(" Building Request... ",-1)])])}const ic=N(rc,[["render",oc],["__scopeId","data-v-5749c429"]]),lc={},cc={class:"requestApproved"};function uc(e,t){return c(),g("div",cc,[...t[0]||(t[0]=[Se('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-bb311586><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><rect height="14.25" rx="7.125" stroke="var(--scalar-color-green)" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-bb311586></rect><g clip-path="url(#clip0_74_840)" data-v-bb311586><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="var(--scalar-color-green)" data-v-bb311586></path></g><defs data-v-bb311586><clipPath id="clip0_74_840" data-v-bb311586><rect height="8" rx="4" width="8" x="4" y="4" data-v-bb311586></rect></clipPath></defs></svg> Request Approved ',2)])])}const dc=N(lc,[["render",uc],["__scopeId","data-v-bb311586"]]),pc={},mc={class:"requestFailed"};function fc(e,t){return c(),g("div",mc,[...t[0]||(t[0]=[v("i",{class:"requestFailedIcon"},[v("svg",{fill:"currentColor",height:"100%",viewBox:"0 0 256 256",width:"100%",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M216,48V208a16,16,0,0,1-16,16H160a16,16,0,0,1-16-16V48a16,16,0,0,1,16-16h40A16,16,0,0,1,216,48ZM96,32H56A16,16,0,0,0,40,48V208a16,16,0,0,0,16,16H96a16,16,0,0,0,16-16V48A16,16,0,0,0,96,32Z"})])],-1),j(" Request Failed ",-1)])])}const gc=N(pc,[["render",fc],["__scopeId","data-v-bc27e533"]]),vc={},hc={class:"requestRejected"};function yc(e,t){return c(),g("div",hc,[...t[0]||(t[0]=[v("svg",{fill:"currentColor",height:"16",viewBox:"0 0 256 256",width:"16",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M56.88,31.93A12,12,0,1,0,39.12,48.07l7.81,8.59A108,108,0,0,0,31.85,177.23L21,209.66A20,20,0,0,0,46.34,235l32.43-10.81a108.08,108.08,0,0,0,112.55-8.66l7.8,8.58a12,12,0,0,0,17.76-16.14ZM128,212a83.91,83.91,0,0,1-42-11.27,12,12,0,0,0-9.82-1l-29.79,9.93,9.93-29.79a12,12,0,0,0-1-9.82,84,84,0,0,1,7.94-95.49l111.84,123A83.83,83.83,0,0,1,128,212Zm108-84a107.22,107.22,0,0,1-8.65,42.4A12,12,0,0,1,205.28,161a84.07,84.07,0,0,0-102.77-113,12,12,0,0,1-7.27-22.87A108.08,108.08,0,0,1,236,128Z"})],-1),j(" Request Rejected ",-1)])])}const bc=N(vc,[["render",yc],["__scopeId","data-v-9803a54c"]]),_c={},wc={class:"requestSuccess"};function xc(e,t){return c(),g("div",wc,[...t[0]||(t[0]=[Se('<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg" data-v-acc2c0d8><rect height="14.25" rx="7.125" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><rect height="14.25" rx="7.125" stroke="currentColor" stroke-width="1.75" width="14.25" x="0.875" y="0.875" data-v-acc2c0d8></rect><g clip-path="url(#clip0_74_840)" data-v-acc2c0d8><path d="M11.6037 6.841L7.59117 10.8535C7.49742 10.9472 7.37029 10.9998 7.23774 10.9998C7.10519 10.9998 6.97806 10.9472 6.8843 10.8535L4.64617 8.6035C4.55257 8.50975 4.5 8.38269 4.5 8.25022C4.5 8.11774 4.55257 7.99068 4.64617 7.89694L5.27117 7.27194C5.36488 7.17862 5.49174 7.12623 5.62399 7.12623C5.75623 7.12623 5.88309 7.17862 5.9768 7.27194L7.25024 8.50694L10.274 5.52037C10.3677 5.42696 10.4946 5.37451 10.627 5.37451C10.7593 5.37451 10.8862 5.42696 10.9799 5.52037L11.6034 6.131C11.6502 6.17746 11.6875 6.23274 11.7129 6.29366C11.7383 6.35458 11.7514 6.41993 11.7514 6.48593C11.7514 6.55194 11.7384 6.6173 11.713 6.67824C11.6877 6.73918 11.6505 6.7945 11.6037 6.841Z" fill="currentColor" data-v-acc2c0d8></path></g><defs data-v-acc2c0d8><clipPath id="clip0_74_840" data-v-acc2c0d8><rect height="8" rx="4" width="8" x="4" y="4" data-v-acc2c0d8></rect></clipPath></defs></svg> Request Succeeded ',2)])])}const Sc=N(_c,[["render",xc],["__scopeId","data-v-acc2c0d8"]]),Ac={"application/epub+zip":{extension:".epub"},"application/gzip":{extension:".gz"},"application/java-archive":{extension:".jar"},"application/javascript":{extension:".js",raw:!0},"application/json":{extension:".json",raw:!0,language:"json"},"application/ld+json":{extension:".jsonld",raw:!0,language:"json"},"application/problem+json":{extension:".json",raw:!0,language:"json"},"application/vnd.api+json":{extension:".json",raw:!0,language:"json"},"application/dns-json":{extension:".json",raw:!0,language:"json"},"application/msword":{extension:".doc"},"application/octet-stream":{extension:".bin"},"application/ogg":{extension:".ogx"},"application/pdf":{extension:".pdf",preview:"object"},"application/rtf":{extension:".rtf",raw:!0},"application/vnd.amazon.ebook":{extension:".azw"},"application/vnd.apple.installer+xml":{extension:".mpkg",raw:!0,language:"xml"},"application/vnd.mozilla.xul+xml":{extension:".xul",raw:!0,language:"xml"},"application/vnd.ms-excel":{extension:".xls"},"application/vnd.ms-fontobject":{extension:".eot"},"application/vnd.ms-powerpoint":{extension:".ppt"},"application/vnd.oasis.opendocument.presentation":{extension:".odp"},"application/vnd.oasis.opendocument.spreadsheet":{extension:".ods"},"application/vnd.oasis.opendocument.text":{extension:".odt"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{extension:".pptx"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{extension:".xlsx"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{extension:".docx"},"application/vnd.rar":{extension:".rar"},"application/vnd.visio":{extension:".vsd"},"application/x-7z-compressed":{extension:".7z"},"application/x-abiword":{extension:".abw"},"application/x-bzip":{extension:".bz"},"application/x-bzip2":{extension:".bz2"},"application/x-cdf":{extension:".cda"},"application/x-csh":{extension:".csh"},"application/x-freearc":{extension:".arc"},"application/x-httpd-php":{extension:".php",raw:!0},"application/x-sh":{extension:".sh",raw:!0},"application/x-tar":{extension:".tar"},"application/xhtml+xml":{extension:".xhtml",raw:!0,language:"html"},"application/xml":{extension:".xml",raw:!0,language:"xml"},"application/yaml":{extension:".yaml",raw:!0,language:"yaml"},"application/zip":{extension:".zip"},"audio/aac":{extension:".aac"},"audio/midi":{extension:".midi"},"audio/mpeg":{extension:".mp3",preview:"audio"},"audio/ogg":{extension:".oga"},"audio/wav":{extension:".wav"},"audio/webm":{extension:".weba"},"font/otf":{extension:".otf"},"font/ttf":{extension:".ttf"},"font/woff":{extension:".woff"},"font/woff2":{extension:".woff2"},"image/apng":{extension:".apng",preview:"image",alpha:!0},"image/avif":{extension:".avif",preview:"image"},"image/bmp":{extension:".bmp",preview:"image"},"image/gif":{extension:".gif",preview:"image",alpha:!0},"image/jpeg":{extension:".jpg",preview:"image"},"image/png":{extension:".png",preview:"image",alpha:!0},"image/svg+xml":{extension:".svg",raw:!0,language:"xml",preview:"image",alpha:!0},"image/tiff":{extension:".tiff"},"image/vnd.microsoft.icon":{extension:".ico",preview:"image"},"image/webp":{extension:".webp",preview:"image",alpha:!0},"text/calendar":{extension:".ics",raw:!0},"text/css":{extension:".css",raw:!0,language:"css"},"text/csv":{extension:".csv",raw:!0},"text/html":{extension:".html",raw:!0,language:"html",preview:"object"},"text/javascript":{extension:".js",raw:!0},"text/plain":{extension:".txt",raw:!0},"text/xml":{extension:".xml",raw:!0,language:"xml"},"text/yaml":{extension:".yaml",raw:!0,language:"yaml"},"video/3gpp":{extension:".3gp"},"audio/3gpp":{extension:".3gp"},"video/3gpp2":{extension:".3g2"},"audio/3gpp2":{extension:".3g2"},"video/mp2t":{extension:".ts"},"video/mp4":{extension:".mp4",preview:"video"},"video/mpeg":{extension:".mpeg"},"video/ogg":{extension:".ogv"},"video/webm":{extension:".webm",preview:"video"},"video/x-msvideo":{extension:".avi"}};function Ic(e){const t=Ac[e];if(t)return t;if(e.endsWith("+json"))return{extension:".json",raw:!0,language:"json"}}const Ec=e=>{try{return decodeURIComponent(e)}catch{return e}};function Cc(e){let t="";if(e){const a=e.match(/filename\*=UTF-8''([^;]+)/)?.[1]??e.match(/filename\s*=\s*"?([^";]+)"?/)?.[1];a&&(t=Ec(a.trim()))}return t}const $c=e=>e instanceof Blob,Tc=e=>e?Object.keys(e).map(t=>({name:t,value:e[t]??""})):[];function Rc({data:e,headers:t}){const a=Tc(t),s=a.find(o=>o.name.toLowerCase()==="content-type"),n=s?.value?new or(s.value):void 0,r=Cc(a.find(o=>o.name.toLowerCase()==="content-disposition")?.value??""),i=$c(e)?URL.createObjectURL(e):typeof e=="string"?URL.createObjectURL(new Blob([e],{type:n?n.toString():void 0})):e instanceof Object&&Object.keys(e).length?URL.createObjectURL(new Blob([JSON.stringify(e)],{type:n?n.toString():void 0})):"";return{mimeType:n,attachmentFilename:r,dataUrl:i}}const kc={},Oc={class:"flex justify-center px-2 py-3"},Mc={class:"text-c-3 p-2 text-sm"};function Pc(e,t){return c(),g("div",Oc,[v("div",Mc,[he(e.$slots,"default")])])}const vs=N(kc,[["render",Pc]]),Nc=["src"],Lc=["src","type"],Dc=["src","type"],Uc=["data","type"],Bc=P({__name:"ResponseBodyPreview",props:{src:{},type:{},mode:{},alpha:{type:Boolean,default:!1}},setup(e){const t=z(!1);return ne(()=>e.src,()=>{t.value=!1}),(a,s)=>!t.value&&e.src?(c(),g("div",{key:0,class:oe(["flex justify-center overflow-auto rounded-b",{"bg-preview p-2":e.alpha}])},[e.mode==="image"?(c(),g("img",{key:0,class:oe(["h-full max-w-full",{rounded:e.alpha}]),src:e.src,onError:s[0]||(s[0]=n=>t.value=!0)},null,42,Nc)):e.mode==="video"?(c(),g("video",{key:1,autoplay:"",controls:"",width:"100%",onError:s[1]||(s[1]=n=>t.value=!0)},[v("source",{src:e.src,type:e.type},null,8,Lc)],32)):e.mode==="audio"?(c(),g("audio",{key:2,class:"my-12",controls:"",onError:s[2]||(s[2]=n=>t.value=!0)},[v("source",{src:e.src,type:e.type},null,8,Dc)],32)):(c(),g("object",{key:3,class:"aspect-[4/3] w-full",data:e.src,type:e.type,onError:s[3]||(s[3]=n=>t.value=!0)},null,40,Uc))],2)):(c(),x(vs,{key:1},{default:J(()=>[...s[4]||(s[4]=[j("Preview unavailable",-1)])]),_:1}))}}),Zc=N(Bc,[["__scopeId","data-v-92f84612"]]),jc=P({__name:"ResponseBodyRaw",props:{content:{},language:{}},setup(e){const t=e;return(a,s)=>(c(),x(d(la),{class:"codeBlock",content:t.content,lang:e.language},null,8,["content","lang"]))}}),Vc=P({__name:"ResponseBody",props:{data:{},responseBody:{},mediaConfig:{},display:{}},setup(e){return ne(()=>e.display,t=>console.log(t)),(t,a)=>(c(),g(F,null,[e.mediaConfig?.raw&&e.display==="raw"&&e.mediaConfig.language?(c(),x(jc,{key:e.responseBody.dataUrl,content:e.data,language:e.mediaConfig.language},null,8,["content","language"])):I("",!0),e.mediaConfig?.preview&&e.display==="preview"?(c(),x(Zc,{key:e.responseBody.dataUrl,alpha:e.mediaConfig.alpha,mode:e.mediaConfig.preview,src:e.responseBody.dataUrl,type:e.responseBody.mimeType?.essence??""},null,8,["alpha","mode","src","type"])):I("",!0),!e.mediaConfig?.raw&&!e.mediaConfig?.preview?(c(),x(vs,{key:2},{default:J(()=>[...a[0]||(a[0]=[j(" Binary file ",-1)])]),_:1})):I("",!0)],64))}}),Hc={class:"text-c-3 text-xxs -my-1 flex justify-center gap-0.5 rounded p-0.5"},zc=P({__name:"ResponseBodyToggle",props:{modelValue:{}},emits:["toggle"],setup(e,{emit:t}){const a=t;return(s,n)=>(c(),g("div",Hc,[v("button",{class:oe(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":e.modelValue==="preview"}]),type:"button",onClick:n[0]||(n[0]=tt(r=>a("toggle","preview"),["stop"]))}," Preview ",2),v("button",{class:oe(["hover:bg-b-3 rounded px-1",{"bg-b-3 text-c-1 cursor-default":e.modelValue==="raw"}]),type:"button",onClick:n[1]||(n[1]=tt(r=>a("toggle","raw"),["stop"]))}," Raw ",2)]))}}),qc={},Fc={class:"sendingRequest"};function Jc(e,t){return c(),g("div",Fc,[...t[0]||(t[0]=[v("div",{class:"playIcon"},[v("svg",{fill:"currentColor",height:"32",viewBox:"0 0 256 256",width:"32",xmlns:"http://www.w3.org/2000/svg"},[v("path",{d:"M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"})])],-1),j(" Sending Request to Endpoint ",-1)])])}const Wc=N(qc,[["render",Jc],["__scopeId","data-v-65dc6dfb"]]),Gc={key:1,class:"autosendContainer"},Yc={key:2,class:"autosendContainer"},Xc={class:"requestContent"},Kc={class:"requestContentInner"},Qc={key:0,class:"code"},eu={key:1,class:"code"},tu={class:"requestHeaderContainer"},au=P({__name:"RequestPreview",props:{request:{},response:{},state:{}},setup(e){const t=O(()=>{if(e.response?.success)return{data:e.response.data.responseBody,headers:e.response.data.headers};if(e.response?.error?.code==="REQUEST_NOT_OK")return{data:e.response.error.detail.responseBody,headers:e.response.error.detail.headers}}),a=z(!1),s=O(()=>e.state==="requestFailed"||e.state==="requiresApproval"?!0:a.value),n=O(()=>Rc({data:t.value?.data,headers:t.value?.headers})),r=O(()=>Ic(n.value.mimeType?.essence??"")),i=z();function o(l){i.value=l}const u=O(()=>i.value?i.value:r.value?.raw&&!r.value.preview?"raw":r.value?.preview?"preview":"raw");return(l,p)=>(c(),g("div",{class:oe(["requestPreview",{open:s.value,succeeded:e.state==="requestSucceeded"}])},[e.state==="approved"?(c(),x(dc,{key:0})):e.state==="buildingRequest"?(c(),g("div",Gc,[$(ic)])):e.state==="requiresApproval"?(c(),g("div",Yc,[$(sc)])):e.state==="sendingRequest"?(c(),g("button",{key:3,class:"toggleButton",type:"button",onClick:p[0]||(p[0]=f=>a.value=!a.value)},[$(Wc),s.value?(c(),x(d(Ee),{key:0})):(c(),x(d(Ze),{key:1}))])):e.state==="requestSucceeded"?(c(),g("button",{key:4,class:"toggleButton",type:"button",onClick:p[1]||(p[1]=f=>a.value=!a.value)},[$(Sc),s.value?(c(),x(d(Ee),{key:0})):(c(),x(d(Ze),{key:1}))])):e.state==="rejected"?(c(),g("button",{key:5,class:"toggleButton",type:"button",onClick:p[2]||(p[2]=f=>a.value=!a.value)},[$(bc),s.value?(c(),x(d(Ee),{key:0})):(c(),x(d(Ze),{key:1}))])):e.state==="requestFailed"?(c(),x(gc,{key:6})):I("",!0),v("div",Xc,[v("div",Kc,[e.request?(c(),g("div",Qc,[p[4]||(p[4]=v("div",{class:"requestHeaderContainer"},[v("h1",null,"Request")],-1)),$(d(la),{class:"codeBlock",content:JSON.stringify(e.request,null,2),lang:"json"},null,8,["content"])])):I("",!0),t.value?(c(),g("div",eu,[v("div",tu,[p[5]||(p[5]=v("h1",null,"Response",-1)),r.value?.raw&&r.value.preview?(c(),x(zc,{key:0,modelValue:u.value,"onUpdate:modelValue":p[3]||(p[3]=f=>u.value=f),onToggle:o},null,8,["modelValue"])):I("",!0)]),$(Vc,{data:t.value.data,display:u.value,mediaConfig:r.value,responseBody:n.value},null,8,["data","display","mediaConfig","responseBody"])])):I("",!0)])])],2))}}),su=N(au,[["__scopeId","data-v-0eb5f95d"]]);function pt(e){return e.type===`tool-${Ne}`&&e.state==="input-available"&&e.input?.method?.toLowerCase()!=="get"}function ru(){const e=H(),t=O(()=>e.chat.messages.filter(s=>s.parts.some(pt)).flatMap(s=>s.parts).filter(pt));async function a(s){const n=t.value.map(async r=>{if(!s)return await e.chat.addToolOutput({tool:Ne,toolCallId:r.toolCallId,state:"output-error",errorText:"The user denied the request."});await ds({documentSettings:it(e.workspaceStore),input:r.input,toolCallId:r.toolCallId,chat:e.chat})});await Promise.all(n)}return{approvalRequiredParts:t,respondToRequestApprovals:a}}const nu={class:"executeRequestTool"},ou=P({__name:"ExecuteRequestTool",props:{messagePart:{}},setup(e){const t=H(),a=O(()=>e.messagePart.value.state==="input-streaming"?"buildingRequest":e.messagePart.value.state==="approval-responded"&&t.chat.status==="submitted"?"sendingRequest":pt(e.messagePart.value)?"requiresApproval":e.messagePart.value.state==="output-available"?e.messagePart.value.output.success?"requestSucceeded":"requestFailed":e.messagePart.value.state==="output-error"?"rejected":null);return(s,n)=>(c(),g("div",nu,[a.value?(c(),x(su,{key:0,request:e.messagePart.value.input,response:e.messagePart.value.output,state:a.value},null,8,["request","response","state"])):I("",!0)]))}}),iu=N(ou,[["__scopeId","data-v-3e825a81"]]),lu=P({__name:"ContextItem",props:{loading:{type:Boolean}},setup(e){return(t,a)=>(c(),g("div",{class:oe(["contextItem",{shimmer:e.loading}])},[he(t.$slots,"default",{},void 0,!0)],2))}}),cu=N(lu,[["__scopeId","data-v-b6e5aa96"]]),uu={},du={class:"sendingRequest"};function pu(e,t){return c(),g("div",du,[...t[0]||(t[0]=[v("div",{class:"playIcon"},null,-1),j(" Retrieving relevant information... ",-1)])])}const mu=N(uu,[["render",pu],["__scopeId","data-v-653c66b3"]]),fu={key:0},gu={key:1,class:"operations"},vu=P({__name:"GetMiniOpenAPIDocTool",props:{messagePart:{},message:{}},setup(e){const t=z(!1);ne(()=>e.message,()=>{const n=e.message.parts,r=n.findIndex(i=>"toolCallId"in i&&i.toolCallId===e.messagePart.value.toolCallId);t.value=!!n[r+1]});const a=O(()=>{if(!e.messagePart.value.output?.structuredContent)return;const n=e.messagePart.value.output?.structuredContent?.info?.title;return jo(e.messagePart.value.output?.structuredContent).map(r=>`${n?`${n} - `:""}${r.summary??""}`).filter(Boolean)}),s=H();return(n,r)=>(c(),g(F,null,[e.messagePart.value.state==="input-available"&&d(s).chat.status==="streaming"?(c(),g("div",fu,[$(mu)])):I("",!0),a.value?(c(),g("div",gu,[(c(!0),g(F,null,ie(a.value,i=>(c(),x(cu,{key:i,loading:!t.value},{default:J(()=>[j(ee(i),1)]),_:2},1032,["loading"]))),128))])):I("",!0)],64))}}),hu=N(vu,[["__scopeId","data-v-ecee6203"]]),yu={},bu={class:"loadingApiSpecs"};function _u(e,t){return c(),g("div",bu,[...t[0]||(t[0]=[v("div",{class:"playIcon"},null,-1),j(" Loading APIs... ",-1)])])}const wu=N(yu,[["render",_u],["__scopeId","data-v-9d9724d2"]]),xu={key:0},Su=P({__name:"GetOpenAPISpecsSummary",props:{messagePart:{},message:{}},setup(e){const t=z(!1);return ne(()=>e.message,()=>{const a=e.message.parts,s=a.findIndex(n=>"toolCallId"in n&&n.toolCallId===e.messagePart.value.toolCallId);t.value=!!a[s+1]}),(a,s)=>t.value?I("",!0):(c(),g("div",xu,[$(wu)]))}}),Au=P({__name:"Text",props:{messagePart:{}},setup(e){return(t,a)=>(c(),x(d(ca),{value:e.messagePart.value.text},null,8,["value"]))}});function hs(){const{api:e}=H(),t=z(""),a=ir(async r=>{const i=await e.search(r);i.success&&(n.value=i.data.results)},200),s=O({get:()=>t.value,set:r=>{a(r),t.value=r}}),n=z([]);return a(""),{query:s,results:n}}const Iu={key:0,class:"catalog custom-scroll"},Eu=["onClick"],Cu={class:"left"},$u=["src"],Tu={class:"right"},Ru={class:"item-top"},ku={class:"version"},Ou={class:"description"},Mu=P({__name:"Catalog",props:{modal:{}},setup(e){const t=hs(),a=H(),s=O(()=>t.results.value.filter(n=>!a.registryDocuments.value.some(r=>r.namespace===n.namespace&&r.slug===n.slug)).map(n=>({...n,label:n.title,id:n.id})));return(n,r)=>(c(),x(d(ua),{class:"catalogModal",state:e.modal},{default:J(()=>[$(d(lr),{autofocus:"",class:"searchInput",modelValue:d(t).query.value,"onUpdate:modelValue":r[0]||(r[0]=i=>d(t).query.value=i??"")},null,8,["modelValue"]),s.value.length?(c(),g("div",Iu,[(c(!0),g(F,null,ie(s.value,i=>(c(),g("button",{key:i.id,class:"item",type:"button",onClick:()=>{d(a).addDocument(i),e.modal.hide()}},[v("div",Cu,[i.logoUrl?(c(),g("img",{key:0,class:"logo",src:i.logoUrl},null,8,$u)):(c(),x(d(cr),{key:1,class:"logo",logo:"Openapi"}))]),v("div",Tu,[v("div",Ru,[v("span",null,ee(i.title),1),v("span",ku,"v"+ee(i.currentVersion),1)]),v("span",Ou," @"+ee(i.namespace)+"/"+ee(i.slug),1)])],8,Eu))),128))])):I("",!0)]),_:1},8,["state"]))}}),Pu=N(Mu,[["__scopeId","data-v-bc24f891"]]),Nu={class:"dropdown-item"},Lu={class:"dropdown-item"},Du=P({__name:"ActionsDropdown",emits:["uploadApi"],setup(e){const t=ra();return(a,s)=>(c(),g(F,null,[$(d(ur),{offset:{crossAxis:-5,mainAxis:5}},{items:J(()=>[$(d(At),{onClick:s[0]||(s[0]=n=>a.$emit("uploadApi"))},{default:J(()=>[v("div",Nu,[$(d(Vr)),s[2]||(s[2]=j(" Upload API ",-1))])]),_:1}),$(d(At),{onClick:s[1]||(s[1]=n=>d(t).show())},{default:J(()=>[v("div",Lu,[$(d(da)),s[3]||(s[3]=j(" Search Catalog ",-1))])]),_:1})]),default:J(()=>[he(a.$slots,"default",{},void 0,!0)]),_:3}),d(t).open?(c(),x(Pu,{key:0,modal:d(t)},null,8,["modal"])):I("",!0)],64))}}),Uu=N(Du,[["__scopeId","data-v-2d142bb5"]]),Bu={class:"approvalSection"},Zu={class:"approvalText flex items-center gap-1.5"},ju={class:"approveContainer"},Vu=P({__name:"ApprovalSection",emits:["approve","reject"],setup(e,{emit:t}){const a=t;return(s,n)=>(c(),g("div",Bu,[v("strong",Zu,[$(d(qe),{class:"text-blue size-4",weight:"bold"}),n[2]||(n[2]=j(" One or more requests require approval. ",-1))]),v("div",ju,[v("button",{type:"button",class:"actionButton rejectButton",onClick:n[0]||(n[0]=r=>a("reject"))}," Reject "),v("button",{type:"button",class:"actionButton approveButton",onClick:n[1]||(n[1]=r=>a("approve"))}," Approve ")])]))}}),Hu=N(Vu,[["__scopeId","data-v-a7e6c699"]]),mt={LIMIT_REACHED:"LIMIT_REACHED"},zu={key:0,class:"error gap-1.5"},qu=P({__name:"ErrorMessage",props:{error:{}},setup(e){const t=[mt.LIMIT_REACHED];return(a,s)=>t.includes(e.error.code)?I("",!0):(c(),g("div",zu,[$(d(qe),{class:"text-red size-4",weight:"bold"}),j(" "+ee(e.error.message),1)]))}}),Fu=N(qu,[["__scopeId","data-v-63a481da"]]),Ju={class:"freeMessagesInfoSection"},Wu={class:"infoText flex items-center gap-1.5"},Gu={class:"actionsContainer"},Yu=P({__name:"FreeMessagesInfoSection",setup(e){const t=z(!1),{dashboardUrl:a,mode:s,uploadedTmpDocumentUrl:n}=H();function r(){window.open("https://scalar.com/products/agent/getting-started","_blank"),s==="full"&&window.location.replace(a),s==="preview"&&window.location.replace(n.value?`${a}/register?flow=oss-agent&docUrl=${n.value}`:a)}function i(){t.value=!0}return(o,u)=>at((c(),g("div",Ju,[v("strong",Wu,[$(d(qe),{class:"text-blue size-4",weight:"bold"}),u[0]||(u[0]=j(" Get an API Key to enable Agent Scalar for your docs. ",-1))]),v("div",Gu,[v("button",{class:"actionButton upgradeButton",type:"button",onClick:r}," Learn More "),v("button",{"aria-label":"Close",class:"closeButton",type:"button",onClick:i},[$(d(ma),{class:"size-4",weight:"bold"})])])],512)),[[pa,!t.value]])}}),Xu=N(Yu,[["__scopeId","data-v-593b8dcb"]]),Ku={class:"paymentSection"},Qu={class:"approvalText flex items-center gap-1.5"},ed=P({__name:"PaymentSection",setup(e){const{dashboardUrl:t,mode:a,uploadedTmpDocumentUrl:s}=H();function n(){a==="full"&&window.location.replace(t),a==="preview"&&window.location.replace(s.value?`${t}/register?flow=oss-agent&docUrl=${s.value}`:t)}return(r,i)=>(c(),g("div",Ku,[v("strong",Qu,[$(d(qe),{class:"text-blue size-4",weight:"bold"}),i[0]||(i[0]=j(" You've used up all your free messages, upgrade for $24/mo. ",-1))]),v("div",{class:"paymentContainer"},[v("button",{class:"actionButton approveButton",type:"button",onClick:n}," Upgrade "),i[1]||(i[1]=Se('<div class="paymentInfo" data-v-59a0be07><h3 data-v-59a0be07>$24 <span data-v-59a0be07>/ month</span></h3><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Members in your workspace</span><span data-v-59a0be07>1</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>x $24 / month / member</span><span data-v-59a0be07>$24.00</span></div></div><div class="paymentInfoSection" data-v-59a0be07><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Messages</span><span data-v-59a0be07>1,000</span></div><div class="paymentInfoItem" data-v-59a0be07><span data-v-59a0be07>Additional Messages</span><span data-v-59a0be07>+ $0.02 Message</span></div></div></div>',1))])]))}}),td=N(ed,[["__scopeId","data-v-59a0be07"]]),ad=["onClick"],sd=["src"],rd={key:1,class:"searchResultsEmpty"},nd=P({__name:"SearchPopover",setup(e){const t=H(),a=hs(),s=O(()=>a.results.value.filter(n=>!t.registryDocuments.value.some(r=>r.namespace===n.namespace&&r.slug===n.slug)).map(n=>({...n,label:n.title,id:n.id})));return(n,r)=>(c(),x(d(dr),{offset:0,placement:"top-start",resize:"",style:{width:"220px"}},{popover:J(({close:i})=>[$(d(fa),{autofocus:"",class:"searchInput",modelValue:d(a).query.value,placeholder:"Add an API","onUpdate:modelValue":r[0]||(r[0]=o=>d(a).query.value=o??"")},{prefix:J(()=>[$(d(da),{class:"searchIcon"})]),_:1},8,["modelValue"]),s.value.length?(c(!0),g(F,{key:0},ie(s.value,o=>(c(),g("button",{key:o.id,class:"searchItem",type:"button",onClick:()=>{d(t).addDocument(o),i()}},[o.logoUrl?(c(),g("img",{key:0,class:"searchItemLogo",src:o.logoUrl},null,8,sd)):I("",!0),v("span",null,ee(o.title),1)],8,ad))),128)):(c(),g("span",rd," No APIs found "))]),default:J(()=>[he(n.$slots,"default",{},void 0,!0)]),_:3}))}}),od=N(nd,[["__scopeId","data-v-7945f74c"]]),id={key:0,class:"flex items-center gap-1.5"},ld={key:0,class:"uploadText"},cd={key:1,class:"uploadText"},ud={key:2,class:"uploadText"},dd={key:1,class:"uploadText flex items-center gap-1.5"},pd={key:2,class:"uploadText flex items-center gap-1.5"},md=P({__name:"UploadSection",props:{uploadState:{}},setup(e){const t=pr(),a=O(()=>["uploading","processing","loading"].includes(e.uploadState.type));return(s,n)=>(c(),g("div",{class:oe(["uploadSection",{error:e.uploadState.type==="error",done:e.uploadState.type==="done"}])},[a.value?(c(),g("div",id,[$(d(ga),{class:"text-blue",loader:{...d(t),isLoading:!0},size:"lg"},null,8,["loader"]),e.uploadState.type==="loading"?(c(),g("strong",ld," Loading document... ")):e.uploadState.type==="processing"?(c(),g("strong",cd," Processing document... ")):(c(),g("strong",ud," Uploading document... "))])):I("",!0),e.uploadState.type==="done"?(c(),g("strong",dd,[$(d(va),{class:"icon text-green"}),n[0]||(n[0]=j(" Document processed ",-1))])):I("",!0),e.uploadState.type==="error"?(c(),g("strong",pd,[$(d(Yr),{class:"icon text-red"}),j(" "+ee(e.uploadState.error),1)])):I("",!0)],2))}}),fd=N(md,[["__scopeId","data-v-f9d3a579"]]),gd=1e4,vd=St({message:ge(),code:ge(),status:Nl(Ol())});function hd(){const{chat:e}=H();return O(()=>{if(!e.error)return;const t=zo(e.error.message),a=vd.safeParse(t);return!t||!a.success?{message:e.error.message,code:"UNKNOWN_ERROR"}:a.data})}function ta(e){return e.type.startsWith("tool")&&e.state==="input-available"}function yd(){const e=H();return{pendingClientToolParts:O(()=>e.chat.messages.filter(t=>t.parts.some(ta)).flatMap(t=>t.parts).filter(ta))}}const bd={class:"actionContainer"},_d=["disabled"],wd={class:"inputActionsContainer"},xd={class:"inputActionsLeft"},Sd={class:"addAPIButton",type:"button"},Ad={class:"addAPIButton",type:"button"},Id=["src"],Ed=["onClick"],Cd={class:"inputActionsRight"},$d={class:"sendCheckboxContinue"},Td={key:0,class:"relative flex items-center gap-1.5"},Rd={class:"termsAgree",for:"agentTermsAgree"},kd={class:"addMoreContext"},Od={class:"ml-auto flex items-center gap-1"},Md=["onClick"],Pd=["alt","src"],Nd=P({__name:"PromptForm",emits:["submit","uploadApi"],setup(e,{expose:t,emit:a}){const s=a;t({focusPrompt:p});const n=ha("agentPrompt"),r=H(),i=O(()=>r.prompt.value.trim().length>0),o=O(()=>r.prompt.value.trim().length>gd),u=O(()=>r.chat.messages.length>1&&!r.getAgentKey?.()&&m?.value?.code!==mt.LIMIT_REACHED);ne(r.prompt,()=>{if(n?.value){if(!r.prompt.value.length){n.value.style.height="0px";return}n.value.style.height="auto",n.value.style.height=n.value.scrollHeight+"px"}});function l(k){r.loading.value||k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),L(),window.scrollTo(0,document.body.scrollHeight))}function p(){n.value?.focus()}ne(()=>r.chat.status,k=>{(k==="ready"||k==="error")&&n.value?.focus()});const{approvalRequiredParts:f,respondToRequestApprovals:y}=ru(),{pendingClientToolParts:b}=yd(),T=Ul();function _(){r.terms.accept(),r.mode==="preview"&&r.getActiveDocumentJson&&T.uploadTempDocument(r.getActiveDocumentJson(),!0)}const S=O(()=>Object.values(r.pendingDocuments).some(Boolean)),R=O(()=>{const k=o.value,E=!i.value,A=f.value.length>0,U=b.value.length>0,q=r.mode==="preview",ye=q&&!r.terms.accepted.value,Ge=q&&!!T.uploadState.value,V=S.value;return k||E||A||U||ye||Ge||V});function L(){R.value||s("submit")}const m=hd();return(k,E)=>(c(),g("div",bd,[d(T).uploadState.value||S.value?(c(),x(fd,{key:0,uploadState:d(T).uploadState.value??{type:"loading"}},null,8,["uploadState"])):I("",!0),d(m)?(c(),x(Fu,{key:1,error:d(m)},null,8,["error"])):I("",!0),d(f).length?(c(),x(Hu,{key:2,onApprove:E[0]||(E[0]=A=>d(y)(!0)),onReject:E[1]||(E[1]=A=>d(y)(!1))})):I("",!0),d(m)?.code===d(mt).LIMIT_REACHED?(c(),x(td,{key:3})):I("",!0),u.value?(c(),x(Xu,{key:4})):I("",!0),v("form",{class:"promptForm",onSubmit:tt(L,["prevent"])},[E[6]||(E[6]=v("label",{class:"agentLabel",for:"agentTextarea"}," Type a Request To get Started ",-1)),at(v("textarea",{id:"agentTextarea",ref:"agentPrompt","onUpdate:modelValue":E[2]||(E[2]=A=>d(r).prompt.value=A),class:"prompt custom-scroll",disabled:d(r).loading.value,name:"prompt",placeholder:"Ask me anything...",onKeydown:l},null,40,_d),[[mr,d(r).prompt.value]]),v("div",wd,[v("div",xd,[d(r).isLoggedIn?.value?(c(),x(Uu,{key:1,onUploadApi:E[3]||(E[3]=A=>k.$emit("uploadApi"))},{default:J(()=>[v("button",Ad,[$(d(It),{class:"size-4",weight:"bold"})])]),_:1})):(c(),x(od,{key:0},{default:J(()=>[v("button",Sd,[$(d(It),{class:"size-4",weight:"bold"})])]),_:1})),(c(!0),g(F,null,ie(d(r).registryDocuments.value,A=>(c(),g("div",{key:A.id,class:"apiPill"},[A.logoUrl?(c(),g("img",{key:0,class:"apiPillLogo",src:A.logoUrl},null,8,Id)):I("",!0),j(" "+ee(A.title)+" ",1),A.removable?(c(),g("button",{key:1,class:"apiPillRemove",type:"button",onClick:U=>d(r).removeDocument(A)},[$(d(ma),{class:"size-4",weight:"bold"})],8,Ed)):I("",!0)]))),128))]),v("div",Cd,[d(r).loading.value?I("",!0):(c(),x(d(Et),{key:0,class:"settingsButton h-7 w-7 p-1.5",icon:d(fr),label:"Scalar",size:"md",weight:"bold",onClick:E[4]||(E[4]=A=>d(r).settingsModal.show())},null,8,["icon"])),v("div",$d,[!d(r).terms.accepted.value&&d(r).mode==="preview"?(c(),g("div",Td,[v("input",{id:"agentTermsAgree",class:"sr-only",type:"checkbox",onChange:_},null,32),v("label",Rd,[$(d(va),{class:"termsAgreeIcon",weight:"bold"}),E[5]||(E[5]=j(" Agree to Terms & Conditions ",-1))])])):I("",!0),d(r).loading.value?(c(),x(d(ga),{key:2,class:"loader h-7 w-7",loader:{isLoading:d(r).loading.value,isValid:!1,clear:async()=>{},invalidate:async()=>{},isInvalid:!1,isActive:!1,validate:async()=>{},start:()=>{}},size:"2xl"},null,8,["loader"])):(c(),x(d(Et),{key:1,class:"sendButton h-7 w-7 p-1.5",disabled:R.value,icon:d(gr),label:"Scalar",size:"md",type:"submit",weight:"bold"},null,8,["disabled","icon"]))])])])],32),at(v("div",kd,[E[7]||(E[7]=v("span",null,"Add context from dozens of API's",-1)),v("div",Od,[(c(!0),g(F,null,ie(d(r).curatedDocuments.value,A=>(c(),g("button",{key:A.id,class:"addAPIContext",type:"button",onClick:U=>d(r).addDocument(A)},[A.logoUrl?(c(),g("img",{key:0,alt:A.title,class:"size-4",src:A.logoUrl},null,8,Pd)):I("",!0)],8,Md))),128))])],512),[[pa,d(r).chat.messages.length<=1]])]))}}),ys=N(Nd,[["__scopeId","data-v-3899441c"]]),Ld={class:"chat"},Dd={key:0},Ud={class:"formContainer"},Bd=P({__name:"Chat",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,s=H();return(n,r)=>(c(),g(F,null,[v("div",Ld,[(c(!0),g(F,null,ie(d(s).chat.messages,i=>(c(),g(F,{key:i.id},[i.role==="user"?(c(!0),g(F,{key:0},ie(i.parts,(o,u)=>(c(),g("div",{key:`${i.id}-${u}`,class:"userMessage"},[o.type==="text"?(c(),g("p",Dd,ee(o.text),1)):I("",!0)]))),128)):I("",!0),i.role==="assistant"?(c(!0),g(F,{key:1},ie(i.parts,(o,u)=>(c(),g("div",{key:`${i.id}-${u}`},[o.type==="text"?(c(),x(Au,{key:0,messagePart:Ie(o)},null,8,["messagePart"])):I("",!0),o.type.endsWith(d(Ne))?(c(),x(iu,{key:1,messagePart:Ie(o)},null,8,["messagePart"])):I("",!0),o.type.endsWith(d(Bl))?(c(),x(hu,{key:2,message:Be(i),messagePart:Ie(o)},null,8,["message","messagePart"])):I("",!0),o.type.endsWith(d(Zl))?(c(),x(Su,{key:3,message:Be(i),messagePart:Ie(o)},null,8,["message","messagePart"])):I("",!0),o.type.endsWith(d(fs))?(c(),x(Ql,{key:4,message:Be(i),messagePart:Ie(o)},null,8,["message","messagePart"])):I("",!0)]))),128)):I("",!0)],64))),128)),r[2]||(r[2]=v("div",{class:"spacer"},null,-1))]),v("div",Ud,[$(ys,{onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))})])],64))}}),Zd=N(Bd,[["__scopeId","data-v-db4ff6c9"]]),jd={},Vd={fill:"none",height:"54",viewBox:"0 0 64 54",width:"64",xmlns:"http://www.w3.org/2000/svg"};function Hd(e,t){return c(),g("svg",Vd,[...t[0]||(t[0]=[v("path",{"clip-rule":"evenodd",d:"M31.0667 0C40.2667 0 48.3333 6.13333 52.6 14.9333H57.2667C59.6 14.9333 61.5333 16.8 61.5333 19.1333V32.2C61.5333 33.4667 60.8667 34.6 60 35.3333L63.3333 45.4V45.4667C63.5639 46.207 63.6166 46.9912 63.4874 47.7557C63.3582 48.5202 63.0505 49.2435 62.5895 49.8669C62.1284 50.4903 61.5269 50.9962 60.8338 51.3437C60.1406 51.6911 59.3754 51.8703 58.6 51.8667H54.3333C53.9895 52.4222 53.5082 52.8797 52.936 53.195C52.3638 53.5103 51.72 53.6728 51.0667 53.6667H47.0667C46.5764 53.6755 46.0892 53.5877 45.6328 53.4082C45.1765 53.2287 44.76 52.961 44.4071 52.6205C44.0542 52.28 43.7719 51.8733 43.5762 51.4237C43.3805 50.9741 43.2753 50.4903 43.2667 50C43.2667 47.9333 44.9333 46.2667 47 46.2667H51.0667C52.4667 46.2667 53.7333 46.9333 54.3333 48.0667H58.6C59.3333 48.0667 59.9333 47.4 59.6667 46.6L56.3333 36.3333H51.3333C49.9333 36.3333 48.6 35.6667 47.8 34.5333V34.4667L46.8 32.9333C46.7585 32.8643 46.6999 32.8072 46.6298 32.7675C46.5597 32.7279 46.4805 32.707 46.4 32.707C46.3195 32.707 46.2403 32.7279 46.1702 32.7675C46.1001 32.8072 46.0415 32.8643 46 32.9333L45.4667 34C45.1162 34.7065 44.5739 35.3 43.9019 35.7126C43.2299 36.1253 42.4552 36.3404 41.6667 36.3333H24.9333C23.4 36.3333 21.9333 35.7333 20.8667 34.6667H20.8L19.8667 33.6667C19.6667 33.4667 19.4667 33.3333 19.2 33.3333L17.4667 33.1333C17.3333 38.8667 13.4667 43.4667 8.73333 43.4667C3.93333 43.4667 0 38.6667 0 32.9333C0 32.2667 0 31.6667 0.133333 31.1333V31C0.8 26.8 3.46667 23.4667 6.93333 22.6C9.46667 9.93333 19.3333 0 31.0667 0ZM3.93333 31.5333C4.46667 28 6.93333 26.2 8.73333 26.2C10.7333 26.2 13.6 28.4 13.6 32.8667C13.6 34.4667 13.2667 35.7333 12.7333 36.7333C11.7333 38.7333 10.0667 39.6667 8.73333 39.6667C7.67025 39.6269 6.66506 39.1722 5.93333 38.4C5.8414 38.3142 5.75246 38.2253 5.66667 38.1333C5.19113 37.6008 4.80806 36.9924 4.53333 36.3333C4.0607 35.2169 3.83335 34.0119 3.86667 32.8V31.6667L3.93333 31.6V31.5333ZM24.3333 20.6667C24.3333 19.6667 25.2 18.8 26.2667 18.8H55.8667C56.9333 18.8 57.8 19.6667 57.7333 20.7333V30.7333C57.6667 31.8 56.8 32.6667 55.7333 32.6667H53.4C53.0667 32.6667 52.7333 32.6667 52.4 32.5333C51.5333 32.3333 50.7333 31.8667 50.4 31.3333L47.9333 27.6C47.7363 27.2901 47.4602 27.0383 47.1336 26.8706C46.8069 26.7028 46.4414 26.6251 46.0747 26.6455C45.7081 26.6658 45.3535 26.7835 45.0474 26.9865C44.7413 27.1894 44.4948 27.4702 44.3333 27.8L42.6667 31C42.4199 31.4974 42.04 31.9165 41.5692 32.2107C41.0984 32.505 40.5552 32.6628 40 32.6667L26.2 32.8C25.1333 32.8 24.2667 31.9333 24.2667 30.8667V20.6667H24.3333ZM11 22.2C13.5333 11.5333 22 3.86667 31 3.86667C37.9333 3.86667 44.4 8.2 48.3333 15H24.3333C21.4667 15 18.6 16 16.3333 17.8L16.2667 17.8667L10.9333 22.2H11Z",fill:"currentColor","fill-rule":"evenodd"},null,-1)])])}const zd=N(jd,[["render",Hd]]),qd={class:"startContainer"},Fd={class:"disclaimerText"},Jd=P({__name:"Start",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,{mode:s}=H();return(n,r)=>(c(),g("div",qd,[$(zd,{class:"agentLogo"}),r[6]||(r[6]=v("h1",{class:"heading"},"How can I help you today?",-1)),$(ys,{ref:"promptFormField",onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))},null,512),v("p",Fd,[d(s)==="preview"?(c(),g(F,{key:0},[j(" By messaging Agent Scalar your OpenAPI Document will be Temporarily uploaded to Scalar's Servers. You must agree to our ")],64)):(c(),g(F,{key:1},[j(" By messaging Agent Scalar you agree to our ")],64)),r[2]||(r[2]=v("a",{class:"disclaimerLink",href:"https://scalar.com/legal/terms-and-conditions",target:"_blank"},"Terms ",-1)),r[3]||(r[3]=j(" and ",-1)),r[4]||(r[4]=v("a",{class:"disclaimerLink",href:"https://scalar.com/legal/privacy-policy",target:"_blank"}," Privacy Policy",-1)),r[5]||(r[5]=j(". ",-1))])]))}}),Wd=N(Jd,[["__scopeId","data-v-1fbb0eb5"]]),Gd={class:"wrapper"},Yd=P({__name:"Layout",emits:["submit","uploadApi"],setup(e,{emit:t}){const a=t,{chat:s}=H();return(n,r)=>(c(),g("div",Gd,[d(s).messages.length&&(d(s).messages.length>1||d(s).status!=="submitted")?(c(),x(Zd,{key:0,onSubmit:r[0]||(r[0]=i=>a("submit")),onUploadApi:r[1]||(r[1]=i=>a("uploadApi"))})):(c(),x(Wd,{key:1,onSubmit:r[2]||(r[2]=i=>a("submit")),onUploadApi:r[3]||(r[3]=i=>a("uploadApi"))}))]))}}),Xd=N(Yd,[["__scopeId","data-v-f1eee0af"]]),Kd={class:"overflow-x-auto"},Qd={key:1,class:"text-c-1 flex h-auto w-full items-center gap-0.75 rounded-b-lg px-3 py-1.5 text-base leading-[20px] whitespace-nowrap"},ep={class:"overflow-x-auto"},tp=P({__name:"Selector",props:{selectedServer:{},servers:{},target:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:a}){const s=a,n=O(()=>e.servers.map(o=>({id:o.url,label:o.url}))),r=O(()=>e.selectedServer?.url?.replace(/\/$/,"")||""),i=O(()=>n.value.find(o=>o.id===e.selectedServer?.url));return t({servers:e.servers,serverUrlWithoutTrailingSlash:r,serverOptions:n,selectedServer:e.selectedServer}),(o,u)=>n.value.length>1?(c(),x(d(vr),{key:0,ref:"elem",class:"group",modelValue:i.value,options:n.value,placement:"bottom-start",resize:"",target:e.target,"onUpdate:modelValue":u[0]||(u[0]=l=>s("update:modelValue",l.id))},{default:J(()=>[$(d(oa),{class:"bg-b-1 text-c-1 h-auto w-full justify-start gap-1.5 overflow-x-auto rounded-t-none rounded-b-xl px-3 py-1.5 text-base font-normal whitespace-nowrap -outline-offset-1",variant:"ghost"},{default:J(()=>[u[1]||(u[1]=v("span",{class:"sr-only"},"Server:",-1)),v("span",Kd,ee(r.value||"Select a server"),1),$(d(Ee),{class:"text-c-2 ui-open:rotate-180 mt-0.25 size-3 transition-transform duration-100",weight:"bold"})]),_:1})]),_:1},8,["modelValue","options","target"])):(c(),g("div",Qd,[u[2]||(u[2]=v("span",{class:"sr-only"},"Server:",-1)),v("span",ep,ee(r.value),1)]))}}),ap=["id"],sp={},rp=P({...sp,__name:"ServerSelector",props:{eventBus:{},selectedServer:{},servers:{}},setup(e){const t=hr(),a=n=>{e.eventBus.emit("server:update:selected",{url:e.selectedServer?.url===n?"":n})},s=(n,r)=>{const i=e.servers.findIndex(o=>o.url===e.selectedServer?.url);i!==-1&&e.eventBus.emit("server:update:variables",{index:i,key:n,value:r})};return(n,r)=>(c(),g(F,null,[r[0]||(r[0]=v("label",{class:"bg-b-2 flex h-8 items-center rounded-t-xl border border-b-0 px-3 py-2.5 font-medium"}," Server ",-1)),v("div",{id:d(t),class:oe(["border",{"rounded-b-xl":!e.selectedServer?.description&&!e.selectedServer?.variables}])},[e.servers.length?(c(),x(tp,{key:0,selectedServer:e.selectedServer,servers:e.servers,target:d(t),"onUpdate:modelValue":a},null,8,["selectedServer","servers","target"])):I("",!0)],10,ap),$(d(yr),{layout:"reference",variables:e.selectedServer?.variables,"onUpdate:variable":s},null,8,["variables"]),e.selectedServer?.description?(c(),x(d(ca),{key:0,class:"text-c-3 rounded-b-xl border border-t-0 px-3 py-1.5",value:e.selectedServer.description},null,8,["value"])):I("",!0)],64))}}),np={class:"docSettings"},op=P({__name:"DocSettings",props:{document:{},name:{}},setup(e){const{workspaceStore:t,config:a,eventBus:s}=H(),n=O(()=>ia(t,e.document)),r=O(()=>{const o=vt(e.document.servers,{documentUrl:e.document["x-scalar-original-source-url"]});return ht(e.document,o)}),i=O(()=>e.document.components?.securitySchemes??{});return(o,u)=>(c(),g("div",np,[v("div",null,[$(gs,{authStore:d(t).auth,document:e.document,environment:n.value,eventBus:d(s),name:e.name,options:d(a),securitySchemes:i.value,selectedServer:r.value},null,8,["authStore","document","environment","eventBus","name","options","securitySchemes","selectedServer"])]),v("div",null,[$(rp,{eventBus:d(s),selectedServer:r.value,servers:e.document.servers??[]},null,8,["eventBus","selectedServer","servers"])])]))}}),ip=N(op,[["__scopeId","data-v-2dfa823a"]]),lp={class:"settingsHeading"},cp={class:"documentList"},up=["onClick"],dp={key:0},pp={key:1,class:"noDocuments"},mp={class:"proxyUrlContainer"},fp=P({__name:"Settings",props:{modalState:{}},setup(e){const{workspaceStore:t,proxyUrl:a}=H();function s(n){t.update("x-scalar-active-document",n)}return(n,r)=>(c(),x(d(ua),{class:"settingsModal",state:e.modalState},{default:J(()=>[v("div",lp,[r[1]||(r[1]=v("h1",null,"Settings",-1)),$(d(br),{class:"colorToggle ml-auto"})]),v("div",cp,[Object.entries(d(t).workspace.documents).length?(c(!0),g(F,{key:0},ie(Object.entries(d(t).workspace.documents),([i,o])=>(c(),g("div",{key:i,class:"document"},[v("button",{class:oe(["documentName",{documentNameActive:d(t).workspace.activeDocument===o}]),type:"button",onClick:u=>s(i)},[j(" @"+ee(i)+" ",1),d(t).workspace.activeDocument===o?(c(),x(d(Ee),{key:0})):(c(),x(d(Ze),{key:1}))],10,up),d(t).workspace.activeDocument===o?(c(),g("div",dp,[$(ip,{document:o,name:i},null,8,["document","name"])])):I("",!0)]))),128)):(c(),g("div",pp," No APIs selected. Use + to add context. "))]),v("div",mp,[r[2]||(r[2]=v("label",{for:"proxyUrl"},"Proxy URL",-1)),$(d(fa),{id:"proxyUrl",modelValue:d(a),"onUpdate:modelValue":r[0]||(r[0]=i=>_r(a)?a.value=i:null),placeholder:"https://proxy.scalar.com"},null,8,["modelValue"])])]),_:1},8,["state"]))}}),gp=N(fp,[["__scopeId","data-v-745651bc"]]),vp={ref:"clientModal"},hp=P({__name:"Chat",emits:["uploadApi"],setup(e){const{chat:t,prompt:a,settingsModal:s,eventBus:n,workspaceStore:r,config:i,mode:o,addDocument:u}=H(),l=ha("clientModal"),p=z(null);ze(async()=>{const y=Dl();o==="preview"&&y&&await u({namespace:y.namespace,slug:y.slug,removable:!1}),l.value&&(p.value=wr({el:l.value,options:i,eventBus:n,workspaceStore:r}))}),xr(()=>{p.value?.app.unmount()}),$l(),Cl(),Tl();async function f(){await t.sendMessage({text:a.value})}return(y,b)=>(c(),g(F,null,[v("div",vp,null,512),$(Xd,{onSubmit:f,onUploadApi:b[0]||(b[0]=T=>y.$emit("uploadApi"))}),$(gp,{modalState:d(s)},null,8,["modalState"])],64))}}),yp=P({__name:"App",props:{registryDocuments:{},registryUrl:{},dashboardUrl:{},baseUrl:{},mode:{default:"full"},getAccessToken:{type:Function},getAgentKey:{type:Function},getActiveDocumentJson:{type:Function},isLoggedIn:{},prefilledMessage:{}},emits:["uploadApi"],setup(e,{expose:t}){const a=El({getActiveDocumentJson:e.getActiveDocumentJson,initialRegistryDocuments:e.registryDocuments,prefilledMessageRef:e.prefilledMessage,registryUrl:e.registryUrl,baseUrl:e.baseUrl,mode:e.mode,getAccessToken:e.getAccessToken,getAgentKey:e.getAgentKey,isLoggedIn:e.isLoggedIn,dashboardUrl:e.dashboardUrl});return Sr(ps,a),t({addDocumentAsync:a.addDocumentAsync}),(s,n)=>(c(),x(hp,{onUploadApi:n[0]||(n[0]=r=>s.$emit("uploadApi"))}))}}),_p=P({__name:"AgentScalarChatInterface",props:{agentScalarConfiguration:{},workspaceStore:{},prefilledMessage:{}},setup(e){return(t,a)=>(c(),x(d(yp),{baseUrl:d(Er),dashboardUrl:d(Ir),getActiveDocumentJson:()=>e.workspaceStore.exportActiveDocument("json"),getAgentKey:e.agentScalarConfiguration?.key?()=>e.agentScalarConfiguration?.key??"":void 0,mode:e.agentScalarConfiguration?.key?"full":"preview",prefilledMessage:e.prefilledMessage,registryDocuments:[],registryUrl:d(Ar)},null,8,["baseUrl","dashboardUrl","getActiveDocumentJson","getAgentKey","mode","prefilledMessage","registryUrl"]))}});export{_p as default};
